/* =====================================================
   CHAT INTERFACE - MOBILE CSS
   Docu-Chain Blockchain Messaging Application
   =====================================================
   
   This mobile CSS works alongside the existing desktop CSS.
   It transforms the chat interface for mobile devices (≤768px).
   
   DASHBOARD INTEGRATION:
   - Fixed header: 60px top
   - Fixed bottom nav: 70px bottom
   
   PHASES:
   1. Core Layout & Sidebar Drawer
   2. Conversations List & Tabs
   3. Chat Area & Messages
   4. Message Input & Attachments
   5. Document Sharing & Approvals
   6. Groups (Mobile)
   7. Circulars Feed (Mobile)
   8. Modals & Overlays
   9. States & Feedback
   10. Polish & Accessibility
   
   ===================================================== */

/* =====================================================
   MOBILE BREAKPOINT (≤768px)
   ===================================================== */
@media screen and (max-width: 768px) {

  /* -------------------------------------------------
     PHASE 1: MOBILE DESIGN TOKENS (Global)
     ------------------------------------------------- */
  :root {
    --dashboard-header: 60px;
    --dashboard-bottom-nav: 70px;
    --chat-header-height: 56px;
    --chat-input-height: 60px;
    --chat-transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* -------------------------------------------------
     PHASE 1: MOBILE DESIGN TOKENS (Component)
     ------------------------------------------------- */
  .chat-interface-wrapper {
    /* Mobile-specific CSS variables */
    --chat-header-height: 56px;
    --chat-input-height: 60px;
    --chat-tab-height: 48px;
    --chat-message-max-width: 80%;
    --chat-touch-target: 44px;
    --chat-padding: 16px;
    --chat-radius: 16px;
    --chat-radius-sm: 12px;
    --chat-radius-lg: 20px;
    --chat-transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --chat-sidebar-width: 100%;
    --chat-backdrop-blur: 8px;
    
    /* Dashboard spacing */
    --dashboard-header: 60px;
    --dashboard-bottom-nav: 70px;
    
    /* Safe area for notch devices */
    --safe-area-top: env(safe-area-inset-top, 0px);
    --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  }

  /* -------------------------------------------------
     CHAT INTERFACE WRAPPER
     ------------------------------------------------- */
  .chat-interface-wrapper {
    width: 100% !important;
    max-width: 100% !important;
    height: calc(100vh - var(--dashboard-header) - var(--dashboard-bottom-nav)) !important;
    min-height: calc(100vh - var(--dashboard-header) - var(--dashboard-bottom-nav)) !important;
    max-height: calc(100vh - var(--dashboard-header) - var(--dashboard-bottom-nav)) !important;
    
    overflow: hidden !important;
    position: relative !important;
    
    display: flex !important;
    flex-direction: column !important;
    
    background: var(--surface) !important;
  }

  /* -------------------------------------------------
     MAIN CHAT CONTAINER
     ------------------------------------------------- */
  .chat-container {
    display: flex !important;
    flex-direction: row !important;
    
    width: 100% !important;
    height: 100% !important;
    
    position: relative !important;
    overflow: hidden !important;
    
    background: var(--surface) !important;
  }

  /* -------------------------------------------------
     SIDEBAR AS SLIDE-OUT DRAWER
     ------------------------------------------------- */
  .chat-sidebar {
    position: fixed !important;
    top: 60px !important;
    top: var(--dashboard-header, 60px) !important;
    left: 0 !important;
    bottom: 70px !important;
    bottom: var(--dashboard-bottom-nav, 70px) !important;
    
    width: 100% !important;
    max-width: 100% !important;
    min-width: 100% !important;
    height: calc(100vh - 60px - 70px) !important;
    height: calc(100vh - var(--dashboard-header, 60px) - var(--dashboard-bottom-nav, 70px)) !important;
    
    background: var(--surface) !important;
    border-right: none !important;
    
    z-index: 200 !important;
    
    /* DEFAULT: Show sidebar (conversations list) - WhatsApp style */
    transform: translateX(0) !important;
    transition: transform var(--chat-transition) !important;
    
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
    
    /* Will change for performance */
    will-change: transform !important;
  }

  /* When a chat is selected, hide sidebar */
  .chat-sidebar.mobile-hidden {
    transform: translateX(-100%) !important;
  }

  /* Sidebar open state (for drawer toggle if needed) */
  .chat-sidebar.open,
  .chat-sidebar.mobile-open,
  .chat-container.sidebar-open .chat-sidebar {
    transform: translateX(0) !important;
  }

  /* -------------------------------------------------
     SIDEBAR BACKDROP
     ------------------------------------------------- */
  .chat-sidebar-backdrop {
    position: fixed !important;
    top: var(--dashboard-header) !important;
    left: 0 !important;
    right: 0 !important;
    bottom: var(--dashboard-bottom-nav) !important;
    
    background: rgba(0, 0, 0, 0.5) !important;
    backdrop-filter: blur(var(--chat-backdrop-blur)) !important;
    -webkit-backdrop-filter: blur(var(--chat-backdrop-blur)) !important;
    
    z-index: 199 !important;
    
    opacity: 0 !important;
    visibility: hidden !important;
    transition: opacity var(--chat-transition), visibility var(--chat-transition) !important;
    
    cursor: pointer !important;
  }

  .chat-sidebar-backdrop.active,
  .chat-container.sidebar-open .chat-sidebar-backdrop {
    opacity: 1 !important;
    visibility: visible !important;
  }

  /* -------------------------------------------------
     SIDEBAR HEADER (Gradient)
     ------------------------------------------------- */
  .chat-sidebar-header {
    padding: 16px !important;
    
    background: linear-gradient(135deg, var(--g-700), var(--g-500)) !important;
    color: white !important;
    
    display: flex !important;
    flex-direction: column !important;
    gap: 12px !important;
    
    flex-shrink: 0 !important;
    position: relative !important;
    z-index: 10 !important;
    
    /* Safe area padding for notch */
    padding-top: calc(16px + var(--safe-area-top)) !important;
  }

  .chat-sidebar-header h2 {
    font-size: 20px !important;
    font-weight: 700 !important;
    margin: 0 !important;
    margin-bottom: 4px !important;
    letter-spacing: 0.3px !important;
  }

  /* Blockchain badge in sidebar header */
  .chat-sidebar-header .blockchain-badge {
    display: inline-flex !important;
    align-items: center !important;
    gap: 6px !important;
    
    padding: 6px 12px !important;
    
    background: rgba(255, 255, 255, 0.15) !important;
    border: 1px solid rgba(255, 255, 255, 0.25) !important;
    border-radius: 10px !important;
    
    font-size: 12px !important;
    color: rgba(255, 255, 255, 0.95) !important;
    
    backdrop-filter: blur(8px) !important;
    -webkit-backdrop-filter: blur(8px) !important;
    
    width: fit-content !important;
  }

  .chat-sidebar-header .blockchain-badge i {
    font-size: 14px !important;
  }

  /* Close button for sidebar (mobile) */
  .chat-sidebar-close {
    position: absolute !important;
    top: 16px !important;
    right: 16px !important;
    
    width: 36px !important;
    height: 36px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: rgba(255, 255, 255, 0.2) !important;
    border: 1px solid rgba(255, 255, 255, 0.3) !important;
    border-radius: 10px !important;
    
    color: white !important;
    font-size: 18px !important;
    
    cursor: pointer !important;
    transition: background var(--chat-transition) !important;
  }

  .chat-sidebar-close:active {
    background: rgba(255, 255, 255, 0.3) !important;
  }

  /* -------------------------------------------------
     USER INFO SECTION
     ------------------------------------------------- */
  .user-info {
    padding: 12px 16px !important;
    
    background: var(--surface) !important;
    border-bottom: 1px solid var(--line) !important;
    
    min-height: 60px !important;
    max-height: 70px !important;
    
    flex-shrink: 0 !important;
  }

  .user-profile {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
  }

  .user-avatar {
    width: 40px !important;
    height: 40px !important;
    
    background: linear-gradient(135deg, var(--g-500), var(--g-700)) !important;
    border-radius: 12px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    color: white !important;
    font-weight: 600 !important;
    font-size: 16px !important;
    
    flex-shrink: 0 !important;
    box-shadow: 0 2px 8px rgba(24, 163, 111, 0.2) !important;
  }

  .user-details {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .user-details h3 {
    font-size: 14px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    
    margin: 0 !important;
    margin-bottom: 2px !important;
    
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
  }

  .user-details p {
    font-size: 12px !important;
    color: var(--muted) !important;
    margin: 0 !important;
    
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
  }

  /* -------------------------------------------------
     CHAT AREA (Full Width on Mobile)
     ------------------------------------------------- */
  .chat-area {
    position: fixed !important;
    top: 60px !important;
    top: var(--dashboard-header, 60px) !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 70px !important;
    bottom: var(--dashboard-bottom-nav, 70px) !important;
    
    width: 100% !important;
    height: calc(100vh - 60px - 70px) !important;
    height: calc(100vh - var(--dashboard-header, 60px) - var(--dashboard-bottom-nav, 70px)) !important;
    
    display: flex !important;
    flex-direction: column !important;
    
    background: var(--surface) !important;
    
    z-index: 100 !important;
    
    overflow: hidden !important;
    
    /* DEFAULT: Hidden (sidebar/conversations visible instead) */
    transform: translateX(100%) !important;
    transition: transform var(--chat-transition) !important;
    
    will-change: transform !important;
  }

  /* When sidebar is hidden, show chat area (full screen) */
  .chat-area.mobile-full {
    transform: translateX(0) !important;
  }

  /* -------------------------------------------------
     MOBILE CHAT HEADER
     ------------------------------------------------- */
  .chat-header {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    
    padding: 8px 12px !important;
    
    height: var(--chat-header-height) !important;
    min-height: var(--chat-header-height) !important;
    max-height: var(--chat-header-height) !important;
    
    background: var(--surface) !important;
    border-bottom: 1px solid var(--line) !important;
    
    flex-shrink: 0 !important;
    gap: 8px !important;
    
    box-sizing: border-box !important;
  }

  .chat-header-left {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    
    flex: 1 !important;
    min-width: 0 !important;
  }

  /* Back/Menu button */
  .back-btn,
  .chat-menu-btn {
    width: var(--chat-touch-target) !important;
    height: var(--chat-touch-target) !important;
    min-width: var(--chat-touch-target) !important;
    min-height: var(--chat-touch-target) !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: none !important;
    border: 1px solid var(--line) !important;
    border-radius: var(--chat-radius-sm) !important;
    
    color: var(--icon) !important;
    font-size: 18px !important;
    
    cursor: pointer !important;
    flex-shrink: 0 !important;
    
    transition: all 0.2s ease !important;
  }

  .back-btn:active,
  .chat-menu-btn:active {
    background: var(--bg) !important;
    transform: scale(0.95) !important;
  }

  /* Header content with avatar and info */
  .chat-header-content {
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
    
    flex: 1 !important;
    min-width: 0 !important;
    
    cursor: pointer !important;
  }

  .chat-avatar {
    width: 40px !important;
    height: 40px !important;
    
    background: radial-gradient(80% 80% at 30% 20%, var(--g-400), var(--g-700)) !important;
    border-radius: 12px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    color: white !important;
    font-weight: 700 !important;
    font-size: 16px !important;
    
    flex-shrink: 0 !important;
    box-shadow: var(--shadow-soft) !important;
  }

  .chat-info {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .chat-info h3 {
    font-size: 15px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    
    margin: 0 !important;
    margin-bottom: 2px !important;
    
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
  }

  .chat-info p {
    font-size: 12px !important;
    color: var(--muted) !important;
    margin: 0 !important;
    
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
  }

  /* Online status indicator in header */
  .chat-info .online-status {
    color: var(--success) !important;
    font-weight: 500 !important;
  }

  /* Header action buttons */
  .chat-header-actions {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    
    flex-shrink: 0 !important;
  }

  .header-action-btn,
  .chat-options {
    width: 40px !important;
    height: 40px !important;
    min-width: 40px !important;
    min-height: 40px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: none !important;
    border: 1px solid var(--line) !important;
    border-radius: var(--chat-radius-sm) !important;
    
    color: var(--icon) !important;
    font-size: 18px !important;
    
    cursor: pointer !important;
    
    transition: all 0.2s ease !important;
  }

  .header-action-btn:active,
  .chat-options:active {
    background: var(--bg) !important;
    transform: scale(0.95) !important;
  }

  .header-action-btn i,
  .chat-options i {
    font-size: 18px !important;
    line-height: 1 !important;
  }

  /* Hide some header actions on mobile - show essential only */
  .chat-header-actions .header-action-btn:not(:first-child):not(:last-child) {
    display: none !important;
  }

  /* -------------------------------------------------
     EMPTY CHAT STATE (No Conversation Selected)
     ------------------------------------------------- */
  .chat-area.empty-state,
  .no-chat-selected {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    
    padding: 40px 24px !important;
    
    text-align: center !important;
    
    background: var(--bg) !important;
  }

  .no-chat-selected .empty-icon,
  .chat-area.empty-state .empty-icon {
    font-size: 64px !important;
    color: var(--g-300) !important;
    margin-bottom: 20px !important;
    opacity: 0.6 !important;
  }

  .no-chat-selected h3,
  .chat-area.empty-state h3 {
    font-size: 18px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    margin: 0 0 8px 0 !important;
  }

  .no-chat-selected p,
  .chat-area.empty-state p {
    font-size: 14px !important;
    color: var(--muted) !important;
    margin: 0 !important;
    max-width: 280px !important;
    line-height: 1.5 !important;
  }

  /* Button to open sidebar when no chat selected */
  .open-sidebar-btn {
    margin-top: 24px !important;
    
    padding: 14px 28px !important;
    
    background: linear-gradient(135deg, var(--g-600), var(--g-500)) !important;
    border: none !important;
    border-radius: var(--chat-radius) !important;
    
    color: white !important;
    font-size: 14px !important;
    font-weight: 600 !important;
    
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    
    cursor: pointer !important;
    
    box-shadow: 0 4px 12px rgba(24, 163, 111, 0.3) !important;
    
    transition: transform 0.2s ease, box-shadow 0.2s ease !important;
  }

  .open-sidebar-btn:active {
    transform: scale(0.97) !important;
  }

  /* -------------------------------------------------
     MOBILE KEYFRAME ANIMATIONS
     ------------------------------------------------- */
  @keyframes chatSlideIn {
    from {
      transform: translateX(-100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes chatSlideOut {
    from {
      transform: translateX(0);
      opacity: 1;
    }
    to {
      transform: translateX(-100%);
      opacity: 0;
    }
  }

  @keyframes chatFadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes chatBackdropFade {
    from {
      opacity: 0;
      backdrop-filter: blur(0);
    }
    to {
      opacity: 1;
      backdrop-filter: blur(var(--chat-backdrop-blur));
    }
  }

  @keyframes chatPulse {
    0%, 100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.05);
    }
  }

  /* -------------------------------------------------
     UTILITY CLASSES FOR MOBILE
     ------------------------------------------------- */
  /* Hide desktop-only elements */
  .chat-hide-mobile,
  .desktop-only {
    display: none !important;
  }

  /* Show mobile-only elements */
  .chat-show-mobile,
  .mobile-only {
    display: flex !important;
  }

  /* Touch-friendly minimum size */
  .chat-touch-target {
    min-width: var(--chat-touch-target) !important;
    min-height: var(--chat-touch-target) !important;
  }

  /* Prevent text selection on interactive elements */
  .chat-sidebar,
  .chat-header,
  .conversation-item,
  .tab,
  button {
    -webkit-user-select: none !important;
    user-select: none !important;
  }

  /* Smooth scrolling on touch */
  .conversations-list,
  .messages-container {
    -webkit-overflow-scrolling: touch !important;
    scroll-behavior: smooth !important;
    overscroll-behavior: contain !important;
  }

  /* -------------------------------------------------
     PHASE 2: SEARCH CONTAINER
     ------------------------------------------------- */
  .search-container {
    padding: 12px 16px !important;
    
    background: var(--surface) !important;
    border-bottom: 1px solid var(--line) !important;
    
    height: auto !important;
    min-height: 68px !important;
    max-height: 68px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    flex-shrink: 0 !important;
    position: relative !important;
    z-index: 5 !important;
  }

  .search-container .search-input,
  .search-container-top .search-input {
    position: relative !important;
    width: 100% !important;
    height: 44px !important;
    
    display: block !important;
    margin: 0 !important;
    padding: 0 !important;
    
    background: transparent !important;
    border: none !important;
  }

  .search-container .search-input input,
  .search-container-top .search-input input {
    width: 100% !important;
    height: 100% !important;
    
    padding: 0 44px 0 44px !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: var(--chat-radius-sm) !important;
    
    font-size: 15px !important;
    color: var(--text) !important;
    
    outline: none !important;
    box-sizing: border-box !important;
    
    transition: border-color 0.2s ease, box-shadow 0.2s ease !important;
  }

  .search-container .search-input input::placeholder {
    color: var(--muted) !important;
    font-size: 14px !important;
  }

  .search-container .search-input input:focus {
    border-color: var(--g-500) !important;
    box-shadow: 0 0 0 3px rgba(24, 163, 111, 0.12) !important;
    background: var(--surface) !important;
  }

  .search-container .search-input .search-icon {
    position: absolute !important;
    left: 14px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    
    color: var(--muted) !important;
    font-size: 18px !important;
    
    pointer-events: none !important;
    z-index: 2 !important;
  }

  .search-container .search-input .clear-icon {
    position: absolute !important;
    right: 12px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    
    width: 32px !important;
    height: 32px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    color: var(--muted) !important;
    font-size: 18px !important;
    
    cursor: pointer !important;
    border-radius: 8px !important;
    
    transition: background 0.2s ease, color 0.2s ease !important;
    z-index: 2 !important;
  }

  .search-container .search-input .clear-icon:active {
    background: rgba(239, 68, 68, 0.1) !important;
    color: var(--danger) !important;
  }

  /* -------------------------------------------------
     TABS NAVIGATION (Direct/Groups/Circulars)
     ------------------------------------------------- */
  .tabs {
    display: flex !important;
    
    height: var(--chat-tab-height) !important;
    min-height: var(--chat-tab-height) !important;
    
    background: var(--surface) !important;
    border-bottom: 1px solid var(--line) !important;
    
    position: relative !important;
    flex-shrink: 0 !important;
    
    gap: 0 !important;
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Sliding indicator under tabs */
  .tabs::after {
    content: '' !important;
    position: absolute !important;
    bottom: 0 !important;
    left: 0 !important;
    
    width: 33.333% !important;
    height: 3px !important;
    
    background: linear-gradient(135deg, var(--g-500), var(--g-600)) !important;
    border-radius: 3px 3px 0 0 !important;
    
    transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1) !important;
    
    box-shadow: 0 0 8px rgba(24, 163, 111, 0.4) !important;
  }

  .tabs[data-active="direct"]::after {
    transform: translateX(0%) !important;
  }

  .tabs[data-active="groups"]::after {
    transform: translateX(100%) !important;
  }

  .tabs[data-active="circulars"]::after {
    transform: translateX(200%) !important;
  }

  /* Individual tab buttons */
  .tab {
    flex: 1 !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    padding: 0 8px !important;
    height: 100% !important;
    
    background: none !important;
    border: none !important;
    border-bottom: 3px solid transparent !important;
    
    font-size: 12px !important;
    font-weight: 600 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    
    color: var(--muted) !important;
    
    cursor: pointer !important;
    position: relative !important;
    z-index: 1 !important;
    
    transition: color 0.3s ease, background 0.3s ease !important;
  }

  .tab:active {
    background: var(--bg) !important;
    transform: scale(0.98) !important;
  }

  .tab.active {
    color: var(--g-600) !important;
    background: var(--bg) !important;
  }

  .tab:not(.active):hover {
    color: var(--text) !important;
    background: var(--bg-2) !important;
  }

  /* Tab with unread count badge */
  .tab .tab-badge {
    margin-left: 6px !important;
    
    padding: 2px 6px !important;
    min-width: 18px !important;
    
    background: var(--danger) !important;
    border-radius: 10px !important;
    
    font-size: 10px !important;
    font-weight: 700 !important;
    color: white !important;
    
    text-align: center !important;
  }

  .tab.active .tab-badge {
    background: var(--g-600) !important;
  }

  /* -------------------------------------------------
     CONVERSATIONS LIST
     ------------------------------------------------- */
  .conversations-list {
    flex: 1 !important;
    
    overflow-y: auto !important;
    overflow-x: hidden !important;
    
    background: var(--surface) !important;
    
    min-height: 0 !important;
  }

  /* Hide scrollbar on mobile */
  .conversations-list::-webkit-scrollbar {
    display: none !important;
  }

  .conversations-list {
    -ms-overflow-style: none !important;
    scrollbar-width: none !important;
  }

  /* -------------------------------------------------
     CONVERSATION ITEM
     ------------------------------------------------- */
  .conversation-item {
    display: flex !important;
    align-items: center !important;
    
    padding: 14px 16px !important;
    min-height: 72px !important;
    
    background: var(--surface) !important;
    border-bottom: 1px solid var(--line) !important;
    
    cursor: pointer !important;
    position: relative !important;
    
    transition: background 0.2s ease !important;
  }

  .conversation-item:active {
    background: var(--bg-2) !important;
  }

  .conversation-item.active {
    background: linear-gradient(135deg, rgba(24, 163, 111, 0.08), rgba(24, 163, 111, 0.04)) !important;
    border-left: 4px solid var(--g-500) !important;
    padding-left: 12px !important;
  }

  /* Dark mode active state */
  .theme-dark .conversation-item.active {
    background: linear-gradient(135deg, rgba(24, 163, 111, 0.15), rgba(24, 163, 111, 0.08)) !important;
  }

  /* Conversation content wrapper */
  .conversation-content {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    width: 100% !important;
  }

  /* -------------------------------------------------
     CONVERSATION AVATAR
     ------------------------------------------------- */
  .conversation-avatar {
    position: relative !important;
    
    width: 52px !important;
    height: 52px !important;
    min-width: 52px !important;
    
    border-radius: 14px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    color: white !important;
    font-weight: 700 !important;
    font-size: 18px !important;
    
    flex-shrink: 0 !important;
    box-shadow: var(--shadow-soft) !important;
  }

  .conversation-avatar.direct {
    background: radial-gradient(80% 80% at 30% 20%, var(--g-400), var(--g-700)) !important;
  }

  .conversation-avatar.group {
    background: radial-gradient(80% 80% at 30% 20%, var(--g-600), var(--g-800)) !important;
  }

  .conversation-avatar.circular {
    background: radial-gradient(80% 80% at 30% 20%, var(--g-500), var(--g-700)) !important;
  }

  /* Online indicator */
  .conversation-avatar .online-indicator {
    position: absolute !important;
    bottom: -2px !important;
    right: -2px !important;
    
    width: 14px !important;
    height: 14px !important;
    
    background: var(--success) !important;
    border: 3px solid var(--surface) !important;
    border-radius: 50% !important;
  }

  /* -------------------------------------------------
     CONVERSATION DETAILS
     ------------------------------------------------- */
  .conversation-details {
    flex: 1 !important;
    min-width: 0 !important;
    
    display: flex !important;
    flex-direction: column !important;
    gap: 4px !important;
  }

  .conversation-header {
    display: flex !important;
    justify-content: space-between !important;
    align-items: flex-start !important;
    gap: 8px !important;
  }

  .conversation-name {
    font-size: 15px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
    
    flex: 1 !important;
    max-width: none !important;
    line-height: 1.3 !important;
  }

  .conversation-time {
    font-size: 12px !important;
    color: var(--muted) !important;
    
    white-space: nowrap !important;
    flex-shrink: 0 !important;
  }

  .conversation-footer {
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    gap: 10px !important;
  }

  .conversation-message {
    font-size: 13px !important;
    color: var(--muted) !important;
    
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
    
    flex: 1 !important;
    line-height: 1.4 !important;
  }

  /* Typing indicator in conversation list */
  .conversation-message.typing {
    color: var(--g-500) !important;
    font-style: italic !important;
  }

  /* -------------------------------------------------
     UNREAD BADGE
     ------------------------------------------------- */
  .unread-badge {
    padding: 4px 10px !important;
    min-width: 22px !important;
    
    background: linear-gradient(135deg, var(--g-500), var(--g-600)) !important;
    border-radius: 12px !important;
    
    font-size: 11px !important;
    font-weight: 700 !important;
    color: white !important;
    
    text-align: center !important;
    flex-shrink: 0 !important;
    
    box-shadow: 0 2px 6px rgba(24, 163, 111, 0.3) !important;
  }

  /* Muted conversation badge */
  .unread-badge.muted {
    background: var(--muted) !important;
    box-shadow: none !important;
  }

  /* -------------------------------------------------
     CONVERSATION META INFO
     ------------------------------------------------- */
  .conversation-meta {
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
    
    font-size: 11px !important;
    color: var(--icon) !important;
    margin-top: 2px !important;
  }

  .conversation-meta i {
    font-size: 12px !important;
  }

  /* -------------------------------------------------
     CREATE GROUP BUTTON
     ------------------------------------------------- */
  .create-group-btn {
    margin: 16px !important;
    padding: 14px 20px !important;
    
    background: linear-gradient(135deg, var(--g-700), var(--g-500)) !important;
    border: none !important;
    border-radius: var(--chat-radius-sm) !important;
    
    color: white !important;
    font-size: 14px !important;
    font-weight: 600 !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 10px !important;
    
    cursor: pointer !important;
    flex-shrink: 0 !important;
    
    box-shadow: 0 4px 12px rgba(24, 163, 111, 0.25) !important;
    
    transition: transform 0.2s ease, box-shadow 0.2s ease !important;
  }

  .create-group-btn:active {
    transform: scale(0.97) !important;
    box-shadow: 0 2px 8px rgba(24, 163, 111, 0.2) !important;
  }

  .create-group-btn i {
    font-size: 18px !important;
  }

  /* -------------------------------------------------
     SEARCH RESULTS SECTION
     ------------------------------------------------- */
  .search-section-header,
  .search-results-header {
    padding: 10px 16px !important;
    
    background: var(--bg) !important;
    border-bottom: 1px solid var(--line) !important;
    
    font-size: 11px !important;
    font-weight: 600 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    
    color: var(--g-600) !important;
  }

  /* New user in search results */
  .conversation-item.new-user,
  .conversation-item.search-result {
    background: rgba(24, 163, 111, 0.04) !important;
    border-left: 3px solid var(--g-500) !important;
  }

  .conversation-item.new-user:active,
  .conversation-item.search-result:active {
    background: rgba(24, 163, 111, 0.1) !important;
  }

  /* Connect button in search results */
  .connect-btn-inline,
  .conversation-item .connect-btn {
    padding: 8px 14px !important;
    
    background: var(--g-500) !important;
    border: none !important;
    border-radius: 8px !important;
    
    color: white !important;
    font-size: 12px !important;
    font-weight: 600 !important;
    
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
    
    cursor: pointer !important;
    flex-shrink: 0 !important;
    
    transition: background 0.2s ease, transform 0.2s ease !important;
  }

  .connect-btn-inline:active,
  .conversation-item .connect-btn:active {
    background: var(--g-600) !important;
    transform: scale(0.95) !important;
  }

  .connect-btn-inline i {
    font-size: 14px !important;
  }

  /* Search loading state */
  .search-loading-inline {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 10px !important;
    
    padding: 24px 16px !important;
    
    color: var(--muted) !important;
    font-size: 14px !important;
  }

  .search-loading-inline .spin {
    animation: spin 1s linear infinite !important;
  }

  /* -------------------------------------------------
     EMPTY CONVERSATIONS STATE
     ------------------------------------------------- */
  .conversations-list .empty-state,
  .no-conversations {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    
    padding: 48px 24px !important;
    
    text-align: center !important;
  }

  .conversations-list .empty-state i,
  .no-conversations i {
    font-size: 56px !important;
    color: var(--g-300) !important;
    margin-bottom: 16px !important;
    opacity: 0.5 !important;
  }

  .conversations-list .empty-state h4,
  .no-conversations h4 {
    font-size: 16px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    margin: 0 0 8px 0 !important;
  }

  .conversations-list .empty-state p,
  .no-conversations p {
    font-size: 13px !important;
    color: var(--muted) !important;
    margin: 0 !important;
    max-width: 240px !important;
    line-height: 1.5 !important;
  }

  /* -------------------------------------------------
     SWIPE ACTIONS (Optional Enhancement)
     ------------------------------------------------- */
  .conversation-item.swiping {
    transition: transform 0.2s ease !important;
  }

  .conversation-swipe-actions {
    position: absolute !important;
    top: 0 !important;
    bottom: 0 !important;
    right: 0 !important;
    
    display: flex !important;
    align-items: stretch !important;
    
    transform: translateX(100%) !important;
    z-index: -1 !important;
  }

  .swipe-action {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    width: 72px !important;
    
    color: white !important;
    font-size: 20px !important;
  }

  .swipe-action.delete {
    background: var(--danger) !important;
  }

  .swipe-action.mute {
    background: var(--warning) !important;
  }

  .swipe-action.archive {
    background: var(--info) !important;
  }

  /* -------------------------------------------------
     PHASE 3: MESSAGES CONTAINER
     ------------------------------------------------- */
  .messages-container {
    flex: 1 !important;
    
    width: 100% !important;
    max-width: 100% !important;
    
    overflow-y: auto !important;
    overflow-x: hidden !important;
    
    padding: 16px !important;
    
    display: flex !important;
    flex-direction: column !important;
    gap: 12px !important;
    
    background: var(--bg) !important;
    
    min-height: 0 !important;
    box-sizing: border-box !important;
  }

  /* Hide scrollbar for cleaner look */
  .messages-container::-webkit-scrollbar {
    display: none !important;
  }

  .messages-container {
    -ms-overflow-style: none !important;
    scrollbar-width: none !important;
  }

  /* -------------------------------------------------
     MESSAGE WRAPPER
     ------------------------------------------------- */
  .message {
    display: flex !important;
    
    animation: messageSlideIn 0.3s ease-out !important;
    will-change: transform, opacity !important;
    
    max-width: 100% !important;
  }

  .message.own {
    justify-content: flex-end !important;
  }

  .message.other {
    justify-content: flex-start !important;
  }

  @keyframes messageSlideIn {
    from {
      opacity: 0;
      transform: translateY(12px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Sent message animation */
  .message.sending {
    opacity: 0.7 !important;
  }

  .message.sent {
    animation: messageSent 0.3s ease !important;
  }

  @keyframes messageSent {
    0% {
      transform: scale(0.95);
      opacity: 0.8;
    }
    50% {
      transform: scale(1.02);
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* -------------------------------------------------
     MESSAGE BUBBLE
     ------------------------------------------------- */
  .message-bubble {
    max-width: var(--chat-message-max-width) !important;
    min-width: 60px !important;
    
    padding: 10px 14px !important;
    
    border-radius: var(--chat-radius) !important;
    
    position: relative !important;
    
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08) !important;
  }

  /* Own message bubble (right side - green) */
  .message-bubble.own {
    background: linear-gradient(135deg, var(--g-500), var(--g-600)) !important;
    color: white !important;
    
    border-bottom-right-radius: 6px !important;
    
    margin-left: 40px !important;
  }

  /* Other message bubble (left side - gray/white) */
  .message-bubble.other {
    background: var(--surface) !important;
    color: var(--text) !important;
    
    border: 1px solid var(--line) !important;
    border-bottom-left-radius: 6px !important;
    
    margin-right: 40px !important;
  }

  /* -------------------------------------------------
     MESSAGE SENDER (for groups)
     ------------------------------------------------- */
  .message-sender {
    font-size: 12px !important;
    font-weight: 600 !important;
    color: var(--g-700) !important;
    
    margin-bottom: 4px !important;
    letter-spacing: 0.3px !important;
  }

  .theme-dark .message-sender {
    color: var(--g-300) !important;
  }

  .message-bubble.own .message-sender {
    color: rgba(255, 255, 255, 0.85) !important;
  }

  /* -------------------------------------------------
     MESSAGE CONTENT
     ------------------------------------------------- */
  .message-content {
    font-size: 15px !important;
    line-height: 1.45 !important;
    
    margin-bottom: 4px !important;
    
    word-break: break-word !important;
  }

  .message-content p {
    margin: 0 !important;
  }

  /* Links in messages */
  .message-content a {
    color: inherit !important;
    text-decoration: underline !important;
  }

  .message-bubble.own .message-content a {
    color: rgba(255, 255, 255, 0.95) !important;
  }

  /* -------------------------------------------------
     MESSAGE TIME & STATUS
     ------------------------------------------------- */
  .message-footer,
  .message-meta {
    display: flex !important;
    align-items: center !important;
    justify-content: flex-end !important;
    gap: 6px !important;
    
    margin-top: 2px !important;
  }

  .message-time {
    font-size: 11px !important;
    font-weight: 500 !important;
    opacity: 0.75 !important;
  }

  .message-bubble.own .message-time {
    color: rgba(255, 255, 255, 0.8) !important;
  }

  .message-bubble.other .message-time {
    color: var(--muted) !important;
  }

  /* Message status icons (sent/delivered/read) */
  .message-status {
    font-size: 14px !important;
    opacity: 0.7 !important;
  }

  .message-bubble.own .message-status {
    color: rgba(255, 255, 255, 0.8) !important;
  }

  .message-status.status-sent {
    opacity: 0.6 !important;
  }

  .message-status.status-delivered {
    opacity: 0.8 !important;
  }

  .message-status.status-read,
  .message-bubble.own .read-tick {
    color: #60a5fa !important;
    opacity: 1 !important;
  }

  /* Double tick for read */
  .message-status.status-read::before {
    content: '✓✓' !important;
  }

  /* -------------------------------------------------
     GROUP MESSAGE WITH AVATAR
     ------------------------------------------------- */
  .message.group-message {
    gap: 8px !important;
  }

  .message.group-message .message-avatar {
    width: 32px !important;
    height: 32px !important;
    min-width: 32px !important;
    
    border-radius: 10px !important;
    
    background: linear-gradient(135deg, var(--g-400), var(--g-600)) !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    color: white !important;
    font-size: 12px !important;
    font-weight: 600 !important;
    
    flex-shrink: 0 !important;
    align-self: flex-end !important;
  }

  .message.group-message.own .message-avatar {
    display: none !important;
  }

  /* -------------------------------------------------
     TYPING INDICATOR
     ------------------------------------------------- */
  .typing-indicator {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    
    padding: 12px 16px !important;
    
    background: var(--surface) !important;
    border: 1px solid var(--line) !important;
    border-radius: var(--chat-radius) !important;
    border-bottom-left-radius: 6px !important;
    
    max-width: fit-content !important;
    
    animation: typingFade 0.3s ease !important;
  }

  @keyframes typingFade {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .typing-indicator-dots {
    display: flex !important;
    gap: 4px !important;
  }

  .typing-indicator-dot {
    width: 8px !important;
    height: 8px !important;
    
    background: var(--g-400) !important;
    border-radius: 50% !important;
    
    animation: typingBounce 1.4s infinite ease-in-out both !important;
  }

  .typing-indicator-dot:nth-child(1) {
    animation-delay: 0s !important;
  }

  .typing-indicator-dot:nth-child(2) {
    animation-delay: 0.2s !important;
  }

  .typing-indicator-dot:nth-child(3) {
    animation-delay: 0.4s !important;
  }

  @keyframes typingBounce {
    0%, 80%, 100% {
      transform: scale(0.6);
      opacity: 0.5;
    }
    40% {
      transform: scale(1);
      opacity: 1;
    }
  }

  .typing-indicator-text {
    font-size: 13px !important;
    color: var(--muted) !important;
    font-style: italic !important;
  }

  /* -------------------------------------------------
     DATE SEPARATOR
     ------------------------------------------------- */
  .date-separator,
  .message-date-divider {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    padding: 16px 0 !important;
    
    position: relative !important;
  }

  .date-separator::before,
  .message-date-divider::before {
    content: '' !important;
    position: absolute !important;
    left: 0 !important;
    right: 0 !important;
    top: 50% !important;
    
    height: 1px !important;
    background: var(--line) !important;
  }

  .date-separator span,
  .message-date-divider span {
    position: relative !important;
    
    padding: 6px 14px !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 20px !important;
    
    font-size: 11px !important;
    font-weight: 600 !important;
    color: var(--muted) !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    
    z-index: 1 !important;
  }

  /* -------------------------------------------------
     REPLY MESSAGE
     ------------------------------------------------- */
  .message-reply,
  .reply-preview {
    padding: 8px 12px !important;
    margin-bottom: 8px !important;
    
    background: rgba(0, 0, 0, 0.06) !important;
    border-left: 3px solid var(--g-500) !important;
    border-radius: 0 8px 8px 0 !important;
    
    font-size: 13px !important;
    color: var(--muted) !important;
    
    cursor: pointer !important;
  }

  .message-bubble.own .message-reply,
  .message-bubble.own .reply-preview {
    background: rgba(255, 255, 255, 0.15) !important;
    border-left-color: rgba(255, 255, 255, 0.5) !important;
    color: rgba(255, 255, 255, 0.85) !important;
  }

  .reply-sender {
    font-weight: 600 !important;
    font-size: 12px !important;
    margin-bottom: 2px !important;
    color: var(--g-600) !important;
  }

  .message-bubble.own .reply-sender {
    color: rgba(255, 255, 255, 0.95) !important;
  }

  .reply-text {
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
    max-width: 200px !important;
  }

  /* -------------------------------------------------
     FORWARDED MESSAGE
     ------------------------------------------------- */
  .message-forwarded {
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
    
    font-size: 11px !important;
    font-style: italic !important;
    color: var(--muted) !important;
    
    margin-bottom: 6px !important;
  }

  .message-bubble.own .message-forwarded {
    color: rgba(255, 255, 255, 0.7) !important;
  }

  .message-forwarded i {
    font-size: 12px !important;
  }

  /* -------------------------------------------------
     IMAGE MESSAGE
     ------------------------------------------------- */
  .message-image {
    max-width: 280px !important;
    
    border-radius: var(--chat-radius-sm) !important;
    overflow: hidden !important;
    
    cursor: pointer !important;
  }

  .message-image img {
    width: 100% !important;
    height: auto !important;
    max-height: 300px !important;
    object-fit: cover !important;
    
    display: block !important;
  }

  .message-image.loading {
    min-height: 150px !important;
    background: var(--bg) !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }

  .message-image.loading::after {
    content: '' !important;
    width: 24px !important;
    height: 24px !important;
    
    border: 2px solid var(--line) !important;
    border-top-color: var(--g-500) !important;
    border-radius: 50% !important;
    
    animation: spin 1s linear infinite !important;
  }

  /* Multiple images grid */
  .message-images-grid {
    display: grid !important;
    gap: 4px !important;
    
    max-width: 280px !important;
    border-radius: var(--chat-radius-sm) !important;
    overflow: hidden !important;
  }

  .message-images-grid.grid-2 {
    grid-template-columns: 1fr 1fr !important;
  }

  .message-images-grid.grid-3 {
    grid-template-columns: 1fr 1fr !important;
    grid-template-rows: 1fr 1fr !important;
  }

  .message-images-grid.grid-3 .image-item:first-child {
    grid-row: span 2 !important;
  }

  .message-images-grid.grid-4 {
    grid-template-columns: 1fr 1fr !important;
    grid-template-rows: 1fr 1fr !important;
  }

  .message-images-grid .image-item {
    position: relative !important;
    aspect-ratio: 1 !important;
    overflow: hidden !important;
    cursor: pointer !important;
  }

  .message-images-grid .image-item img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
  }

  .message-images-grid .image-item.more-images::after {
    content: attr(data-count) !important;
    position: absolute !important;
    inset: 0 !important;
    
    background: rgba(0, 0, 0, 0.5) !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    color: white !important;
    font-size: 20px !important;
    font-weight: 600 !important;
  }

  /* -------------------------------------------------
     LINK PREVIEW
     ------------------------------------------------- */
  .link-preview {
    margin-top: 8px !important;
    
    background: rgba(0, 0, 0, 0.04) !important;
    border: 1px solid var(--line) !important;
    border-radius: var(--chat-radius-sm) !important;
    
    overflow: hidden !important;
    cursor: pointer !important;
  }

  .message-bubble.own .link-preview {
    background: rgba(255, 255, 255, 0.1) !important;
    border-color: rgba(255, 255, 255, 0.2) !important;
  }

  .link-preview-image {
    width: 100% !important;
    height: 120px !important;
    object-fit: cover !important;
  }

  .link-preview-content {
    padding: 10px 12px !important;
  }

  .link-preview-title {
    font-size: 13px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    
    margin-bottom: 4px !important;
    
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
  }

  .message-bubble.own .link-preview-title {
    color: white !important;
  }

  .link-preview-description {
    font-size: 12px !important;
    color: var(--muted) !important;
    
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
  }

  .message-bubble.own .link-preview-description {
    color: rgba(255, 255, 255, 0.7) !important;
  }

  .link-preview-domain {
    font-size: 11px !important;
    color: var(--g-500) !important;
    margin-top: 6px !important;
  }

  .message-bubble.own .link-preview-domain {
    color: rgba(255, 255, 255, 0.8) !important;
  }

  /* -------------------------------------------------
     MESSAGE CONTEXT MENU (Long Press)
     ------------------------------------------------- */
  .message-context-menu {
    position: fixed !important;
    
    min-width: 180px !important;
    
    background: var(--surface) !important;
    border: 1px solid var(--line) !important;
    border-radius: var(--chat-radius-sm) !important;
    
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15) !important;
    
    z-index: 500 !important;
    
    overflow: hidden !important;
    
    animation: contextMenuPop 0.2s ease !important;
  }

  @keyframes contextMenuPop {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .context-menu-item {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    padding: 14px 16px !important;
    
    font-size: 14px !important;
    color: var(--text) !important;
    
    cursor: pointer !important;
    
    transition: background 0.15s ease !important;
  }

  .context-menu-item:active {
    background: var(--bg) !important;
  }

  .context-menu-item i {
    font-size: 18px !important;
    color: var(--icon) !important;
    width: 20px !important;
    text-align: center !important;
  }

  .context-menu-item.danger {
    color: var(--danger) !important;
  }

  .context-menu-item.danger i {
    color: var(--danger) !important;
  }

  .context-menu-divider {
    height: 1px !important;
    background: var(--line) !important;
    margin: 4px 0 !important;
  }

  /* -------------------------------------------------
     SCROLL TO BOTTOM BUTTON
     ------------------------------------------------- */
  .scroll-to-bottom-btn {
    position: absolute !important;
    bottom: 80px !important;
    right: 16px !important;
    
    width: 44px !important;
    height: 44px !important;
    
    background: var(--surface) !important;
    border: 1px solid var(--line) !important;
    border-radius: 50% !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    color: var(--icon) !important;
    font-size: 20px !important;
    
    cursor: pointer !important;
    
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
    
    z-index: 50 !important;
    
    opacity: 0 !important;
    visibility: hidden !important;
    transform: translateY(20px) !important;
    
    transition: opacity 0.2s ease, visibility 0.2s ease, transform 0.2s ease !important;
  }

  .scroll-to-bottom-btn.visible {
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateY(0) !important;
  }

  .scroll-to-bottom-btn:active {
    transform: scale(0.95) !important;
    background: var(--bg) !important;
  }

  /* Unread count on scroll button */
  .scroll-to-bottom-btn .unread-count {
    position: absolute !important;
    top: -6px !important;
    right: -6px !important;
    
    min-width: 20px !important;
    height: 20px !important;
    padding: 0 6px !important;
    
    background: var(--g-500) !important;
    border-radius: 10px !important;
    
    font-size: 11px !important;
    font-weight: 700 !important;
    color: white !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }

  /* -------------------------------------------------
     NEW MESSAGES INDICATOR
     ------------------------------------------------- */
  .new-messages-indicator {
    position: sticky !important;
    top: 0 !important;
    
    padding: 8px 16px !important;
    margin: -16px -16px 16px -16px !important;
    
    background: linear-gradient(135deg, var(--g-500), var(--g-600)) !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 8px !important;
    
    font-size: 13px !important;
    font-weight: 600 !important;
    color: white !important;
    
    cursor: pointer !important;
    z-index: 10 !important;
    
    animation: slideDown 0.3s ease !important;
  }

  @keyframes slideDown {
    from {
      transform: translateY(-100%);
    }
    to {
      transform: translateY(0);
    }
  }

  .new-messages-indicator i {
    font-size: 16px !important;
  }

  /* -------------------------------------------------
     PHASE 4: MESSAGE INPUT CONTAINER
     ------------------------------------------------- */
  .message-input-container,
  .chat-input-container {
    position: relative !important;
    
    padding: 12px 16px !important;
    padding-bottom: calc(12px + var(--safe-area-bottom)) !important;
    
    background: var(--surface) !important;
    border-top: 1px solid var(--line) !important;
    
    display: flex !important;
    align-items: flex-end !important;
    gap: 10px !important;
    
    flex-shrink: 0 !important;
    
    /* Subtle blur effect */
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
  }

  /* Reply preview above input */
  .input-reply-preview {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    
    padding: 10px 16px !important;
    
    background: var(--bg) !important;
    border-bottom: 1px solid var(--line) !important;
    
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    transform: translateY(-100%) !important;
    
    animation: slideUp 0.2s ease !important;
  }

  @keyframes slideUp {
    from { transform: translateY(0); }
    to { transform: translateY(-100%); }
  }

  .input-reply-preview.visible {
    transform: translateY(-100%) !important;
  }

  .input-reply-content {
    flex: 1 !important;
    min-width: 0 !important;
    
    padding-left: 12px !important;
    border-left: 3px solid var(--g-500) !important;
  }

  .input-reply-name {
    font-size: 12px !important;
    font-weight: 600 !important;
    color: var(--g-600) !important;
  }

  .input-reply-text {
    font-size: 13px !important;
    color: var(--muted) !important;
    
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
  }

  .input-reply-close {
    width: 32px !important;
    height: 32px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: none !important;
    border: none !important;
    border-radius: 8px !important;
    
    color: var(--muted) !important;
    font-size: 18px !important;
    
    cursor: pointer !important;
  }

  .input-reply-close:active {
    background: var(--line) !important;
  }

  /* -------------------------------------------------
     ATTACHMENT BUTTON
     ------------------------------------------------- */
  .attachment-btn,
  .message-attachment-btn {
    width: var(--chat-touch-target) !important;
    height: var(--chat-touch-target) !important;
    min-width: var(--chat-touch-target) !important;
    min-height: var(--chat-touch-target) !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: none !important;
    border: 1px solid var(--line) !important;
    border-radius: var(--chat-radius-sm) !important;
    
    color: var(--icon) !important;
    font-size: 20px !important;
    
    cursor: pointer !important;
    flex-shrink: 0 !important;
    
    transition: all 0.2s ease !important;
  }

  .attachment-btn:active,
  .message-attachment-btn:active {
    background: var(--bg) !important;
    color: var(--g-500) !important;
    border-color: var(--g-300) !important;
    transform: scale(0.95) !important;
  }

  /* -------------------------------------------------
     TEXT INPUT AREA
     ------------------------------------------------- */
  .message-input-wrapper,
  .chat-input-wrapper {
    flex: 1 !important;
    
    position: relative !important;
    
    display: flex !important;
    align-items: flex-end !important;
  }

  .message-input,
  .chat-input,
  .message-input-container textarea,
  .chat-input-container textarea {
    width: 100% !important;
    
    min-height: 44px !important;
    max-height: 120px !important;
    
    padding: 12px 44px 12px 16px !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 22px !important;
    
    font-size: 15px !important;
    font-family: inherit !important;
    color: var(--text) !important;
    
    resize: none !important;
    outline: none !important;
    
    line-height: 1.4 !important;
    
    transition: border-color 0.2s ease, box-shadow 0.2s ease !important;
  }

  .message-input::placeholder,
  .chat-input::placeholder,
  .message-input-container textarea::placeholder {
    color: var(--muted) !important;
  }

  .message-input:focus,
  .chat-input:focus,
  .message-input-container textarea:focus {
    border-color: var(--g-500) !important;
    box-shadow: 0 0 0 3px rgba(24, 163, 111, 0.1) !important;
  }

  /* Emoji button inside input */
  .emoji-btn {
    position: absolute !important;
    right: 8px !important;
    bottom: 6px !important;
    
    width: 32px !important;
    height: 32px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: none !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: var(--muted) !important;
    font-size: 20px !important;
    
    cursor: pointer !important;
  }

  .emoji-btn:active {
    background: var(--line) !important;
    color: var(--g-500) !important;
  }

  /* -------------------------------------------------
     SEND BUTTON
     ------------------------------------------------- */
  .send-btn,
  .message-send-btn {
    width: var(--chat-touch-target) !important;
    height: var(--chat-touch-target) !important;
    min-width: var(--chat-touch-target) !important;
    min-height: var(--chat-touch-target) !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: linear-gradient(135deg, var(--g-500), var(--g-600)) !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: white !important;
    font-size: 20px !important;
    
    cursor: pointer !important;
    flex-shrink: 0 !important;
    
    box-shadow: 0 2px 8px rgba(24, 163, 111, 0.3) !important;
    
    transition: transform 0.2s ease, box-shadow 0.2s ease !important;
  }

  .send-btn:active,
  .message-send-btn:active {
    transform: scale(0.9) !important;
    box-shadow: 0 1px 4px rgba(24, 163, 111, 0.2) !important;
  }

  .send-btn:disabled,
  .message-send-btn:disabled {
    background: var(--line) !important;
    color: var(--muted) !important;
    box-shadow: none !important;
    cursor: not-allowed !important;
  }

  .send-btn i,
  .message-send-btn i {
    margin-left: 2px !important;
  }

  /* Voice recording button (alternative to send) */
  .voice-btn {
    width: var(--chat-touch-target) !important;
    height: var(--chat-touch-target) !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 50% !important;
    
    color: var(--icon) !important;
    font-size: 20px !important;
    
    cursor: pointer !important;
    flex-shrink: 0 !important;
  }

  .voice-btn:active {
    background: var(--danger) !important;
    border-color: var(--danger) !important;
    color: white !important;
  }

  .voice-btn.recording {
    background: var(--danger) !important;
    border-color: var(--danger) !important;
    color: white !important;
    animation: recordingPulse 1s infinite !important;
  }

  @keyframes recordingPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
  }

  /* -------------------------------------------------
     ATTACHMENT MENU (Bottom Sheet)
     ------------------------------------------------- */
  .attachment-menu-overlay {
    position: fixed !important;
    inset: 0 !important;
    
    background: rgba(0, 0, 0, 0.5) !important;
    backdrop-filter: blur(4px) !important;
    -webkit-backdrop-filter: blur(4px) !important;
    
    z-index: 400 !important;
    
    opacity: 0 !important;
    visibility: hidden !important;
    
    transition: opacity 0.3s ease, visibility 0.3s ease !important;
  }

  .attachment-menu-overlay.open {
    opacity: 1 !important;
    visibility: visible !important;
  }

  .attachment-menu,
  .attachment-sheet {
    position: fixed !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    
    background: var(--surface) !important;
    border-radius: 20px 20px 0 0 !important;
    
    padding: 8px 0 !important;
    padding-bottom: calc(16px + var(--safe-area-bottom)) !important;
    
    z-index: 401 !important;
    
    transform: translateY(100%) !important;
    
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  }

  .attachment-menu-overlay.open .attachment-menu,
  .attachment-menu-overlay.open .attachment-sheet,
  .attachment-menu.open,
  .attachment-sheet.open {
    transform: translateY(0) !important;
  }

  /* Sheet handle */
  .attachment-menu-handle,
  .sheet-handle {
    width: 36px !important;
    height: 4px !important;
    
    background: var(--line) !important;
    border-radius: 2px !important;
    
    margin: 8px auto 16px !important;
  }

  /* Sheet header */
  .attachment-menu-header,
  .sheet-header {
    padding: 0 20px 16px !important;
    
    border-bottom: 1px solid var(--line) !important;
  }

  .attachment-menu-title,
  .sheet-title {
    font-size: 16px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    margin: 0 !important;
  }

  /* Attachment options grid */
  .attachment-options {
    display: grid !important;
    grid-template-columns: repeat(4, 1fr) !important;
    gap: 8px !important;
    
    padding: 20px 16px !important;
  }

  .attachment-option {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    gap: 8px !important;
    
    padding: 16px 8px !important;
    
    background: none !important;
    border: none !important;
    border-radius: var(--chat-radius-sm) !important;
    
    cursor: pointer !important;
    
    transition: background 0.2s ease !important;
  }

  .attachment-option:active {
    background: var(--bg) !important;
  }

  .attachment-option-icon {
    width: 52px !important;
    height: 52px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    border-radius: 50% !important;
    
    font-size: 24px !important;
  }

  /* Icon colors */
  .attachment-option.documents .attachment-option-icon {
    background: linear-gradient(135deg, #3b82f6, #2563eb) !important;
    color: white !important;
  }

  .attachment-option.camera .attachment-option-icon {
    background: linear-gradient(135deg, #ef4444, #dc2626) !important;
    color: white !important;
  }

  .attachment-option.gallery .attachment-option-icon {
    background: linear-gradient(135deg, #a855f7, #9333ea) !important;
    color: white !important;
  }

  .attachment-option.location .attachment-option-icon {
    background: linear-gradient(135deg, var(--g-500), var(--g-600)) !important;
    color: white !important;
  }

  .attachment-option.blockchain .attachment-option-icon {
    background: linear-gradient(135deg, #f59e0b, #d97706) !important;
    color: white !important;
  }

  .attachment-option.contact .attachment-option-icon {
    background: linear-gradient(135deg, #06b6d4, #0891b2) !important;
    color: white !important;
  }

  .attachment-option.poll .attachment-option-icon {
    background: linear-gradient(135deg, #ec4899, #db2777) !important;
    color: white !important;
  }

  .attachment-option.audio .attachment-option-icon {
    background: linear-gradient(135deg, #f97316, #ea580c) !important;
    color: white !important;
  }

  .attachment-option-label {
    font-size: 11px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
    text-align: center !important;
  }

  /* -------------------------------------------------
     UPLOAD PROGRESS (in input area)
     ------------------------------------------------- */
  .upload-progress-container {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    
    padding: 12px 16px !important;
    
    background: var(--bg) !important;
    border-bottom: 1px solid var(--line) !important;
    
    transform: translateY(-100%) !important;
    
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
  }

  .upload-progress-container.visible {
    display: flex !important;
  }

  .upload-file-preview {
    width: 40px !important;
    height: 40px !important;
    
    border-radius: 8px !important;
    overflow: hidden !important;
    
    flex-shrink: 0 !important;
  }

  .upload-file-preview img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
  }

  .upload-file-preview.document {
    background: var(--line) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    color: var(--icon) !important;
    font-size: 18px !important;
  }

  .upload-progress-info {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .upload-file-name {
    font-size: 13px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
    
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
  }

  .upload-progress-bar {
    height: 4px !important;
    
    background: var(--line) !important;
    border-radius: 2px !important;
    
    margin-top: 6px !important;
    overflow: hidden !important;
  }

  .upload-progress-fill {
    height: 100% !important;
    
    background: linear-gradient(90deg, var(--g-500), var(--g-400)) !important;
    border-radius: 2px !important;
    
    transition: width 0.3s ease !important;
  }

  .upload-progress-cancel {
    width: 32px !important;
    height: 32px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: none !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: var(--danger) !important;
    font-size: 18px !important;
    
    cursor: pointer !important;
    flex-shrink: 0 !important;
  }

  .upload-progress-cancel:active {
    background: rgba(239, 68, 68, 0.1) !important;
  }

  /* -------------------------------------------------
     FILE/IMAGE PREVIEW CHIPS (before sending)
     ------------------------------------------------- */
  .input-attachments-preview {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 8px !important;
    
    padding: 12px 16px !important;
    
    background: var(--bg) !important;
    border-bottom: 1px solid var(--line) !important;
  }

  .attachment-preview-chip {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    
    padding: 6px 10px !important;
    
    background: var(--surface) !important;
    border: 1px solid var(--line) !important;
    border-radius: 20px !important;
  }

  .attachment-preview-chip img {
    width: 24px !important;
    height: 24px !important;
    border-radius: 4px !important;
    object-fit: cover !important;
  }

  .attachment-preview-chip i {
    font-size: 16px !important;
    color: var(--icon) !important;
  }

  .attachment-preview-chip span {
    font-size: 12px !important;
    color: var(--text) !important;
    max-width: 100px !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
  }

  .attachment-preview-remove {
    width: 20px !important;
    height: 20px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--line) !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: var(--muted) !important;
    font-size: 12px !important;
    
    cursor: pointer !important;
  }

  .attachment-preview-remove:active {
    background: var(--danger) !important;
    color: white !important;
  }

  /* -------------------------------------------------
     EMOJI PICKER (Bottom Sheet)
     ------------------------------------------------- */
  .emoji-picker-overlay {
    position: fixed !important;
    inset: 0 !important;
    
    background: rgba(0, 0, 0, 0.3) !important;
    
    z-index: 400 !important;
    
    opacity: 0 !important;
    visibility: hidden !important;
    
    transition: opacity 0.3s ease, visibility 0.3s ease !important;
  }

  .emoji-picker-overlay.open {
    opacity: 1 !important;
    visibility: visible !important;
  }

  .emoji-picker {
    position: fixed !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    
    height: 320px !important;
    
    background: var(--surface) !important;
    border-radius: 20px 20px 0 0 !important;
    
    z-index: 401 !important;
    
    transform: translateY(100%) !important;
    
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    
    display: flex !important;
    flex-direction: column !important;
  }

  .emoji-picker-overlay.open .emoji-picker {
    transform: translateY(0) !important;
  }

  .emoji-picker-header {
    padding: 12px 16px !important;
    
    border-bottom: 1px solid var(--line) !important;
    
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
  }

  .emoji-search-input {
    flex: 1 !important;
    
    height: 36px !important;
    padding: 0 12px !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 18px !important;
    
    font-size: 14px !important;
    color: var(--text) !important;
    
    outline: none !important;
  }

  .emoji-picker-categories {
    display: flex !important;
    
    padding: 8px 12px !important;
    
    border-bottom: 1px solid var(--line) !important;
    
    overflow-x: auto !important;
    gap: 4px !important;
  }

  .emoji-category-btn {
    width: 36px !important;
    height: 36px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: none !important;
    border: none !important;
    border-radius: 8px !important;
    
    font-size: 20px !important;
    
    cursor: pointer !important;
    flex-shrink: 0 !important;
  }

  .emoji-category-btn.active {
    background: var(--bg) !important;
  }

  .emoji-picker-grid {
    flex: 1 !important;
    
    display: grid !important;
    grid-template-columns: repeat(8, 1fr) !important;
    gap: 4px !important;
    
    padding: 12px !important;
    
    overflow-y: auto !important;
  }

  .emoji-item {
    width: 100% !important;
    aspect-ratio: 1 !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    font-size: 24px !important;
    
    background: none !important;
    border: none !important;
    border-radius: 8px !important;
    
    cursor: pointer !important;
  }

  .emoji-item:active {
    background: var(--bg) !important;
    transform: scale(1.1) !important;
  }

  /* =====================================================
     PHASE 5: DOCUMENT SHARING & APPROVALS
     =====================================================
     Document cards in chat, sharing modal, approval workflow,
     blockchain verification indicators, status badges
     ===================================================== */

  /* -------------------------------------------------
     DOCUMENT MESSAGE CARD
     ------------------------------------------------- */
  .message-document,
  .document-message,
  .chat-document-card {
    display: flex !important;
    flex-direction: column !important;
    
    width: 100% !important;
    max-width: 280px !important;
    
    padding: 0 !important;
    margin: 4px 0 !important;
    
    background: var(--surface) !important;
    border: 1px solid var(--line) !important;
    border-radius: var(--chat-radius-sm) !important;
    
    overflow: hidden !important;
    
    transition: var(--chat-transition) !important;
  }

  .message-bubble.own .message-document,
  .message-bubble.own .document-message,
  .message-bubble.own .chat-document-card {
    background: var(--bg) !important;
    border-color: rgba(var(--g-500-rgb), 0.2) !important;
  }

  /* Document Card Header */
  .document-card-header,
  .message-document-header {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    padding: 12px !important;
    
    background: var(--bg) !important;
    border-bottom: 1px solid var(--line) !important;
  }

  .message-bubble.own .document-card-header,
  .message-bubble.own .message-document-header {
    background: rgba(var(--g-500-rgb), 0.05) !important;
    border-bottom-color: rgba(var(--g-500-rgb), 0.1) !important;
  }

  /* Document Icon */
  .document-icon,
  .message-document-icon {
    width: 44px !important;
    height: 44px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    border-radius: 10px !important;
    
    font-size: 20px !important;
    
    flex-shrink: 0 !important;
  }

  .document-icon.pdf,
  .message-document-icon.pdf {
    background: linear-gradient(135deg, #ef4444, #dc2626) !important;
    color: white !important;
  }

  .document-icon.doc,
  .document-icon.docx,
  .message-document-icon.doc,
  .message-document-icon.docx {
    background: linear-gradient(135deg, #3b82f6, #2563eb) !important;
    color: white !important;
  }

  .document-icon.xls,
  .document-icon.xlsx,
  .message-document-icon.xls,
  .message-document-icon.xlsx {
    background: linear-gradient(135deg, #22c55e, #16a34a) !important;
    color: white !important;
  }

  .document-icon.ppt,
  .document-icon.pptx,
  .message-document-icon.ppt,
  .message-document-icon.pptx {
    background: linear-gradient(135deg, #f97316, #ea580c) !important;
    color: white !important;
  }

  .document-icon.image,
  .message-document-icon.image {
    background: linear-gradient(135deg, #a855f7, #9333ea) !important;
    color: white !important;
  }

  .document-icon.default,
  .message-document-icon.default {
    background: linear-gradient(135deg, #6b7280, #4b5563) !important;
    color: white !important;
  }

  /* Document Info */
  .document-info,
  .message-document-info {
    flex: 1 !important;
    min-width: 0 !important;
    
    display: flex !important;
    flex-direction: column !important;
    gap: 4px !important;
  }

  .document-name,
  .message-document-name {
    font-size: 14px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    
    line-height: 1.3 !important;
  }

  .document-meta,
  .message-document-meta {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    
    font-size: 12px !important;
    color: var(--muted) !important;
  }

  .document-size,
  .message-document-size {
    color: var(--muted) !important;
  }

  .document-type,
  .message-document-type {
    text-transform: uppercase !important;
    font-weight: 500 !important;
    color: var(--muted) !important;
  }

  /* Document Card Body */
  .document-card-body,
  .message-document-body {
    padding: 12px !important;
    
    display: flex !important;
    flex-direction: column !important;
    gap: 10px !important;
  }

  /* Document Preview Thumbnail */
  .document-preview,
  .message-document-preview {
    width: 100% !important;
    aspect-ratio: 16/9 !important;
    
    border-radius: 8px !important;
    overflow: hidden !important;
    
    background: var(--bg) !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }

  .document-preview img,
  .message-document-preview img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
  }

  .document-preview-placeholder {
    font-size: 40px !important;
    color: var(--muted) !important;
    opacity: 0.5 !important;
  }

  /* -------------------------------------------------
     BLOCKCHAIN VERIFICATION BADGE
     ------------------------------------------------- */
  .blockchain-badge,
  .document-blockchain-badge,
  .verification-badge {
    display: inline-flex !important;
    align-items: center !important;
    gap: 6px !important;
    
    padding: 4px 10px !important;
    
    background: linear-gradient(135deg, rgba(var(--g-500-rgb), 0.1), rgba(var(--g-600-rgb), 0.15)) !important;
    border: 1px solid rgba(var(--g-500-rgb), 0.2) !important;
    border-radius: 20px !important;
    
    font-size: 11px !important;
    font-weight: 600 !important;
    color: var(--g-500) !important;
    
    white-space: nowrap !important;
  }

  .blockchain-badge i,
  .verification-badge i {
    font-size: 12px !important;
  }

  .blockchain-badge.verified,
  .verification-badge.verified {
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(22, 163, 74, 0.15)) !important;
    border-color: rgba(34, 197, 94, 0.3) !important;
    color: #22c55e !important;
  }

  .blockchain-badge.pending,
  .verification-badge.pending {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.15)) !important;
    border-color: rgba(245, 158, 11, 0.3) !important;
    color: #f59e0b !important;
  }

  .blockchain-badge.unverified,
  .verification-badge.unverified {
    background: linear-gradient(135deg, rgba(107, 114, 128, 0.1), rgba(75, 85, 99, 0.15)) !important;
    border-color: rgba(107, 114, 128, 0.3) !important;
    color: #6b7280 !important;
  }

  /* Transaction Hash Display */
  .tx-hash,
  .transaction-hash {
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
    
    padding: 8px 12px !important;
    
    background: var(--bg) !important;
    border-radius: 8px !important;
    
    font-family: 'SF Mono', 'Fira Code', monospace !important;
    font-size: 11px !important;
    color: var(--muted) !important;
    
    overflow: hidden !important;
  }

  .tx-hash-value {
    flex: 1 !important;
    
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }

  .tx-hash-copy {
    width: 28px !important;
    height: 28px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--surface) !important;
    border: none !important;
    border-radius: 6px !important;
    
    color: var(--muted) !important;
    font-size: 12px !important;
    
    cursor: pointer !important;
    flex-shrink: 0 !important;
    
    transition: var(--chat-transition) !important;
  }

  .tx-hash-copy:active {
    background: var(--g-500) !important;
    color: white !important;
    transform: scale(0.95) !important;
  }

  /* -------------------------------------------------
     DOCUMENT ACTIONS
     ------------------------------------------------- */
  .document-actions,
  .message-document-actions {
    display: flex !important;
    gap: 8px !important;
    
    padding: 12px !important;
    
    border-top: 1px solid var(--line) !important;
  }

  .document-action-btn {
    flex: 1 !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 6px !important;
    
    height: 40px !important;
    min-height: var(--chat-touch-target) !important;
    
    padding: 0 16px !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 8px !important;
    
    font-size: 13px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .document-action-btn i {
    font-size: 14px !important;
  }

  .document-action-btn:active {
    transform: scale(0.98) !important;
    background: var(--line) !important;
  }

  .document-action-btn.primary {
    background: var(--g-500) !important;
    border-color: var(--g-500) !important;
    color: white !important;
  }

  .document-action-btn.primary:active {
    background: var(--g-600) !important;
  }

  .document-action-btn.download {
    background: linear-gradient(135deg, var(--g-500), var(--g-600)) !important;
    border-color: transparent !important;
    color: white !important;
  }

  /* -------------------------------------------------
     SHARE DOCUMENT MODAL
     ------------------------------------------------- */
  .share-document-modal,
  .document-share-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    
    z-index: 1100 !important;
    
    display: flex !important;
    align-items: flex-end !important;
    justify-content: center !important;
    
    background: rgba(0, 0, 0, 0.5) !important;
    
    opacity: 0 !important;
    visibility: hidden !important;
    
    transition: var(--chat-transition) !important;
  }

  .share-document-modal.open,
  .document-share-modal.open {
    opacity: 1 !important;
    visibility: visible !important;
  }

  .share-modal-content,
  .document-share-content {
    width: 100% !important;
    max-width: 100% !important;
    max-height: 85vh !important;
    
    background: var(--surface) !important;
    border-radius: var(--chat-radius-lg) var(--chat-radius-lg) 0 0 !important;
    
    display: flex !important;
    flex-direction: column !important;
    
    transform: translateY(100%) !important;
    
    transition: var(--chat-transition) !important;
    
    overflow: hidden !important;
  }

  .share-document-modal.open .share-modal-content,
  .document-share-modal.open .document-share-content {
    transform: translateY(0) !important;
  }

  /* Share Modal Header */
  .share-modal-header {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    
    padding: 16px 20px !important;
    
    border-bottom: 1px solid var(--line) !important;
  }

  .share-modal-title {
    font-size: 17px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
  }

  .share-modal-close {
    width: 36px !important;
    height: 36px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--bg) !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: var(--muted) !important;
    font-size: 18px !important;
    
    cursor: pointer !important;
  }

  /* Share Modal Document Preview */
  .share-document-preview {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    padding: 16px 20px !important;
    
    background: var(--bg) !important;
    border-bottom: 1px solid var(--line) !important;
  }

  .share-document-preview .document-icon {
    width: 48px !important;
    height: 48px !important;
    font-size: 22px !important;
  }

  .share-document-details {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .share-document-name {
    font-size: 15px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }

  .share-document-info {
    font-size: 13px !important;
    color: var(--muted) !important;
    margin-top: 2px !important;
  }

  /* Recipients List in Share Modal */
  .share-recipients-section {
    flex: 1 !important;
    
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
  }

  .share-recipients-header {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    
    padding: 12px 20px !important;
    
    position: sticky !important;
    top: 0 !important;
    
    background: var(--surface) !important;
    
    z-index: 1 !important;
  }

  .share-recipients-title {
    font-size: 13px !important;
    font-weight: 600 !important;
    color: var(--muted) !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
  }

  .share-select-all {
    font-size: 13px !important;
    font-weight: 500 !important;
    color: var(--g-500) !important;
    
    background: none !important;
    border: none !important;
    
    cursor: pointer !important;
  }

  .share-recipient-item {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    padding: 12px 20px !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .share-recipient-item:active {
    background: var(--bg) !important;
  }

  .share-recipient-item.selected {
    background: rgba(var(--g-500-rgb), 0.08) !important;
  }

  .share-recipient-avatar {
    width: 44px !important;
    height: 44px !important;
    
    border-radius: 50% !important;
    
    object-fit: cover !important;
    
    flex-shrink: 0 !important;
  }

  .share-recipient-info {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .share-recipient-name {
    font-size: 15px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
  }

  .share-recipient-role {
    font-size: 13px !important;
    color: var(--muted) !important;
    margin-top: 2px !important;
  }

  .share-recipient-check {
    width: 24px !important;
    height: 24px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    border-radius: 50% !important;
    border: 2px solid var(--line) !important;
    
    background: transparent !important;
    
    transition: var(--chat-transition) !important;
    
    flex-shrink: 0 !important;
  }

  .share-recipient-item.selected .share-recipient-check {
    background: var(--g-500) !important;
    border-color: var(--g-500) !important;
    color: white !important;
  }

  .share-recipient-check i {
    font-size: 12px !important;
    opacity: 0 !important;
    transform: scale(0.5) !important;
    transition: var(--chat-transition) !important;
  }

  .share-recipient-item.selected .share-recipient-check i {
    opacity: 1 !important;
    transform: scale(1) !important;
  }

  /* Share Options */
  .share-options-section {
    padding: 16px 20px !important;
    
    border-top: 1px solid var(--line) !important;
    
    display: flex !important;
    flex-direction: column !important;
    gap: 12px !important;
  }

  .share-option-toggle {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    
    padding: 12px 16px !important;
    
    background: var(--bg) !important;
    border-radius: 12px !important;
  }

  .share-option-label {
    display: flex !important;
    flex-direction: column !important;
    gap: 2px !important;
  }

  .share-option-title {
    font-size: 14px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
  }

  .share-option-desc {
    font-size: 12px !important;
    color: var(--muted) !important;
  }

  /* Toggle Switch */
  .toggle-switch {
    width: 48px !important;
    height: 28px !important;
    
    background: var(--line) !important;
    border-radius: 14px !important;
    
    position: relative !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .toggle-switch.active {
    background: var(--g-500) !important;
  }

  .toggle-switch::after {
    content: '' !important;
    
    position: absolute !important;
    top: 2px !important;
    left: 2px !important;
    
    width: 24px !important;
    height: 24px !important;
    
    background: white !important;
    border-radius: 50% !important;
    
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2) !important;
    
    transition: var(--chat-transition) !important;
  }

  .toggle-switch.active::after {
    left: calc(100% - 26px) !important;
  }

  /* Share Modal Footer */
  .share-modal-footer {
    display: flex !important;
    gap: 12px !important;
    
    padding: 16px 20px !important;
    padding-bottom: calc(16px + var(--safe-area-bottom)) !important;
    
    border-top: 1px solid var(--line) !important;
  }

  .share-cancel-btn {
    flex: 1 !important;
    
    height: 48px !important;
    min-height: var(--chat-touch-target) !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 12px !important;
    
    font-size: 15px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .share-send-btn {
    flex: 2 !important;
    
    height: 48px !important;
    min-height: var(--chat-touch-target) !important;
    
    background: linear-gradient(135deg, var(--g-500), var(--g-600)) !important;
    border: none !important;
    border-radius: 12px !important;
    
    font-size: 15px !important;
    font-weight: 600 !important;
    color: white !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 8px !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .share-send-btn:active {
    transform: scale(0.98) !important;
  }

  .share-send-btn:disabled {
    opacity: 0.5 !important;
    cursor: not-allowed !important;
  }

  /* -------------------------------------------------
     APPROVAL REQUEST CARD
     ------------------------------------------------- */
  .approval-request-card,
  .message-approval,
  .approval-message {
    width: 100% !important;
    max-width: 300px !important;
    
    background: var(--surface) !important;
    border: 1px solid var(--line) !important;
    border-radius: var(--chat-radius-sm) !important;
    
    overflow: hidden !important;
    
    margin: 4px 0 !important;
  }

  .message-bubble.own .approval-request-card,
  .message-bubble.own .message-approval,
  .message-bubble.own .approval-message {
    background: var(--bg) !important;
    border-color: rgba(var(--g-500-rgb), 0.2) !important;
  }

  /* Approval Header */
  .approval-header {
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
    
    padding: 12px 14px !important;
    
    background: linear-gradient(135deg, rgba(var(--g-500-rgb), 0.08), rgba(var(--g-600-rgb), 0.12)) !important;
    border-bottom: 1px solid rgba(var(--g-500-rgb), 0.15) !important;
  }

  .approval-icon {
    width: 36px !important;
    height: 36px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--g-500) !important;
    border-radius: 10px !important;
    
    color: white !important;
    font-size: 16px !important;
    
    flex-shrink: 0 !important;
  }

  .approval-title-group {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .approval-label {
    font-size: 11px !important;
    font-weight: 600 !important;
    color: var(--g-500) !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
  }

  .approval-document-name {
    font-size: 14px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    
    margin-top: 2px !important;
  }

  /* Approval Status Badges */
  .approval-status {
    display: inline-flex !important;
    align-items: center !important;
    gap: 4px !important;
    
    padding: 4px 10px !important;
    
    border-radius: 20px !important;
    
    font-size: 11px !important;
    font-weight: 600 !important;
    
    white-space: nowrap !important;
  }

  .approval-status.pending {
    background: rgba(245, 158, 11, 0.15) !important;
    color: #f59e0b !important;
  }

  .approval-status.approved {
    background: rgba(34, 197, 94, 0.15) !important;
    color: #22c55e !important;
  }

  .approval-status.rejected {
    background: rgba(239, 68, 68, 0.15) !important;
    color: #ef4444 !important;
  }

  .approval-status.in-progress {
    background: rgba(59, 130, 246, 0.15) !important;
    color: #3b82f6 !important;
  }

  /* Approval Body */
  .approval-body {
    padding: 14px !important;
    
    display: flex !important;
    flex-direction: column !important;
    gap: 12px !important;
  }

  /* Approval Info Rows */
  .approval-info-row {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    
    font-size: 13px !important;
  }

  .approval-info-label {
    color: var(--muted) !important;
  }

  .approval-info-value {
    font-weight: 500 !important;
    color: var(--text) !important;
  }

  /* Approval Requestor */
  .approval-requestor {
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
    
    padding: 10px 12px !important;
    
    background: var(--bg) !important;
    border-radius: 10px !important;
  }

  .approval-requestor-avatar {
    width: 32px !important;
    height: 32px !important;
    
    border-radius: 50% !important;
    
    object-fit: cover !important;
  }

  .approval-requestor-info {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .approval-requestor-name {
    font-size: 13px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
  }

  .approval-requestor-role {
    font-size: 11px !important;
    color: var(--muted) !important;
  }

  /* Approval Progress */
  .approval-progress {
    display: flex !important;
    flex-direction: column !important;
    gap: 8px !important;
  }

  .approval-progress-header {
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    
    font-size: 12px !important;
  }

  .approval-progress-label {
    color: var(--muted) !important;
  }

  .approval-progress-count {
    font-weight: 600 !important;
    color: var(--text) !important;
  }

  .approval-progress-bar {
    height: 6px !important;
    
    background: var(--bg) !important;
    border-radius: 3px !important;
    
    overflow: hidden !important;
  }

  .approval-progress-fill {
    height: 100% !important;
    
    background: linear-gradient(90deg, var(--g-500), var(--g-400)) !important;
    border-radius: 3px !important;
    
    transition: width 0.5s ease !important;
  }

  /* Approval Actions */
  .approval-actions {
    display: flex !important;
    gap: 10px !important;
    
    padding: 12px 14px !important;
    
    border-top: 1px solid var(--line) !important;
  }

  .approval-btn {
    flex: 1 !important;
    
    height: 42px !important;
    min-height: var(--chat-touch-target) !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 6px !important;
    
    padding: 0 14px !important;
    
    border-radius: 10px !important;
    
    font-size: 14px !important;
    font-weight: 600 !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .approval-btn i {
    font-size: 14px !important;
  }

  .approval-btn.approve {
    background: linear-gradient(135deg, #22c55e, #16a34a) !important;
    border: none !important;
    color: white !important;
  }

  .approval-btn.approve:active {
    transform: scale(0.98) !important;
    filter: brightness(0.95) !important;
  }

  .approval-btn.reject {
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    color: #ef4444 !important;
  }

  .approval-btn.reject:active {
    background: rgba(239, 68, 68, 0.1) !important;
    border-color: rgba(239, 68, 68, 0.3) !important;
  }

  .approval-btn.view {
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    color: var(--text) !important;
  }

  /* -------------------------------------------------
     APPROVAL MODAL (Full Screen on Mobile)
     ------------------------------------------------- */
  .approval-modal,
  .approval-detail-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    
    z-index: 1200 !important;
    
    background: var(--surface) !important;
    
    display: flex !important;
    flex-direction: column !important;
    
    transform: translateX(100%) !important;
    
    transition: var(--chat-transition) !important;
  }

  .approval-modal.open,
  .approval-detail-modal.open {
    transform: translateX(0) !important;
  }

  /* Approval Modal Header */
  .approval-modal-header {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    height: var(--chat-header-height) !important;
    min-height: var(--chat-header-height) !important;
    
    padding: 0 16px !important;
    
    background: var(--surface) !important;
    border-bottom: 1px solid var(--line) !important;
    
    flex-shrink: 0 !important;
  }

  .approval-modal-back {
    width: 40px !important;
    height: 40px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: none !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: var(--text) !important;
    font-size: 20px !important;
    
    cursor: pointer !important;
    
    margin-left: -8px !important;
  }

  .approval-modal-title {
    flex: 1 !important;
    
    font-size: 17px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
  }

  /* Approval Modal Content */
  .approval-modal-content {
    flex: 1 !important;
    
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    
    padding: 20px !important;
  }

  /* Document Preview Section */
  .approval-document-section {
    padding: 20px !important;
    
    background: var(--bg) !important;
    border-radius: var(--chat-radius) !important;
    
    margin-bottom: 20px !important;
  }

  .approval-document-header {
    display: flex !important;
    align-items: center !important;
    gap: 14px !important;
    
    margin-bottom: 16px !important;
  }

  .approval-document-icon {
    width: 56px !important;
    height: 56px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    border-radius: 14px !important;
    
    font-size: 26px !important;
  }

  .approval-document-details h3 {
    font-size: 16px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    margin: 0 0 4px 0 !important;
  }

  .approval-document-meta {
    font-size: 13px !important;
    color: var(--muted) !important;
  }

  .approval-view-document-btn {
    width: 100% !important;
    height: 44px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 8px !important;
    
    background: var(--surface) !important;
    border: 1px solid var(--line) !important;
    border-radius: 10px !important;
    
    font-size: 14px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
    
    cursor: pointer !important;
  }

  /* Approval Workflow Section */
  .approval-workflow-section {
    margin-bottom: 20px !important;
  }

  .approval-section-title {
    font-size: 14px !important;
    font-weight: 600 !important;
    color: var(--muted) !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    
    margin-bottom: 12px !important;
  }

  /* Approval Chain / Timeline */
  .approval-chain {
    display: flex !important;
    flex-direction: column !important;
    gap: 0 !important;
  }

  .approval-chain-item {
    display: flex !important;
    gap: 12px !important;
    
    padding: 12px 0 !important;
    
    position: relative !important;
  }

  .approval-chain-item:not(:last-child)::after {
    content: '' !important;
    
    position: absolute !important;
    left: 18px !important;
    top: 48px !important;
    bottom: 0 !important;
    
    width: 2px !important;
    
    background: var(--line) !important;
  }

  .approval-chain-item.completed:not(:last-child)::after {
    background: var(--g-500) !important;
  }

  .approval-chain-status {
    width: 38px !important;
    height: 38px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    border-radius: 50% !important;
    
    font-size: 16px !important;
    
    flex-shrink: 0 !important;
    
    z-index: 1 !important;
  }

  .approval-chain-status.pending {
    background: var(--bg) !important;
    border: 2px solid var(--line) !important;
    color: var(--muted) !important;
  }

  .approval-chain-status.approved {
    background: #22c55e !important;
    border: none !important;
    color: white !important;
  }

  .approval-chain-status.rejected {
    background: #ef4444 !important;
    border: none !important;
    color: white !important;
  }

  .approval-chain-status.current {
    background: var(--g-500) !important;
    border: none !important;
    color: white !important;
    animation: pulse 2s infinite !important;
  }

  @keyframes pulse {
    0%, 100% {
      box-shadow: 0 0 0 0 rgba(var(--g-500-rgb), 0.4) !important;
    }
    50% {
      box-shadow: 0 0 0 8px rgba(var(--g-500-rgb), 0) !important;
    }
  }

  .approval-chain-info {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .approval-chain-name {
    font-size: 14px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
  }

  .approval-chain-role {
    font-size: 12px !important;
    color: var(--muted) !important;
    margin-top: 2px !important;
  }

  .approval-chain-timestamp {
    font-size: 11px !important;
    color: var(--muted) !important;
    margin-top: 4px !important;
  }

  /* Comment Section */
  .approval-comment-section {
    margin-bottom: 20px !important;
  }

  .approval-comment-input {
    width: 100% !important;
    min-height: 100px !important;
    
    padding: 14px !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 12px !important;
    
    font-size: 15px !important;
    color: var(--text) !important;
    
    resize: vertical !important;
  }

  .approval-comment-input::placeholder {
    color: var(--muted) !important;
  }

  .approval-comment-input:focus {
    outline: none !important;
    border-color: var(--g-500) !important;
  }

  /* Approval Modal Footer */
  .approval-modal-footer {
    display: flex !important;
    gap: 12px !important;
    
    padding: 16px 20px !important;
    padding-bottom: calc(16px + var(--safe-area-bottom)) !important;
    
    border-top: 1px solid var(--line) !important;
    
    background: var(--surface) !important;
    
    flex-shrink: 0 !important;
  }

  .approval-modal-btn {
    flex: 1 !important;
    
    height: 50px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 8px !important;
    
    border-radius: 12px !important;
    
    font-size: 16px !important;
    font-weight: 600 !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .approval-modal-btn.reject {
    background: var(--bg) !important;
    border: 1px solid #ef4444 !important;
    color: #ef4444 !important;
  }

  .approval-modal-btn.approve {
    background: linear-gradient(135deg, #22c55e, #16a34a) !important;
    border: none !important;
    color: white !important;
  }

  .approval-modal-btn:active {
    transform: scale(0.98) !important;
  }

  /* -------------------------------------------------
     APPROVAL HISTORY
     ------------------------------------------------- */
  .approval-history-section {
    margin-bottom: 20px !important;
  }

  .approval-history-list {
    display: flex !important;
    flex-direction: column !important;
    gap: 12px !important;
  }

  .approval-history-item {
    display: flex !important;
    align-items: flex-start !important;
    gap: 12px !important;
    
    padding: 14px !important;
    
    background: var(--bg) !important;
    border-radius: 12px !important;
  }

  .approval-history-avatar {
    width: 36px !important;
    height: 36px !important;
    
    border-radius: 50% !important;
    
    object-fit: cover !important;
    
    flex-shrink: 0 !important;
  }

  .approval-history-content {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .approval-history-header {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    gap: 8px !important;
    
    margin-bottom: 4px !important;
  }

  .approval-history-name {
    font-size: 14px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
  }

  .approval-history-action {
    display: inline-flex !important;
    align-items: center !important;
    gap: 4px !important;
    
    padding: 2px 8px !important;
    
    border-radius: 10px !important;
    
    font-size: 11px !important;
    font-weight: 600 !important;
  }

  .approval-history-action.approved {
    background: rgba(34, 197, 94, 0.15) !important;
    color: #22c55e !important;
  }

  .approval-history-action.rejected {
    background: rgba(239, 68, 68, 0.15) !important;
    color: #ef4444 !important;
  }

  .approval-history-comment {
    font-size: 13px !important;
    color: var(--text) !important;
    line-height: 1.5 !important;
  }

  .approval-history-time {
    font-size: 11px !important;
    color: var(--muted) !important;
    margin-top: 6px !important;
  }

  /* =====================================================
     PHASE 6: GROUPS (MOBILE)
     =====================================================
     Group chat header, group details modal, create group flow,
     member management, group settings, admin controls
     ===================================================== */

  /* -------------------------------------------------
     GROUP CHAT HEADER (Enhanced)
     ------------------------------------------------- */
  .chat-header.group-chat {
    display: flex !important;
    flex-direction: column !important;
    
    height: auto !important;
    min-height: var(--chat-header-height) !important;
    
    padding: 10px 12px !important;
  }

  .group-header-main {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    width: 100% !important;
  }

  .group-avatar-container {
    position: relative !important;
    flex-shrink: 0 !important;
  }

  .group-avatar {
    width: 44px !important;
    height: 44px !important;
    
    border-radius: 14px !important;
    
    object-fit: cover !important;
    
    background: linear-gradient(135deg, var(--g-500), var(--g-600)) !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    color: white !important;
    font-size: 18px !important;
    font-weight: 600 !important;
  }

  .group-avatar img {
    width: 100% !important;
    height: 100% !important;
    border-radius: 14px !important;
    object-fit: cover !important;
  }

  .group-avatar-badge {
    position: absolute !important;
    bottom: -2px !important;
    right: -2px !important;
    
    width: 20px !important;
    height: 20px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--g-500) !important;
    border: 2px solid var(--surface) !important;
    border-radius: 50% !important;
    
    color: white !important;
    font-size: 10px !important;
  }

  .group-header-info {
    flex: 1 !important;
    min-width: 0 !important;
    
    display: flex !important;
    flex-direction: column !important;
    gap: 2px !important;
  }

  .group-name {
    font-size: 16px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
  }

  .group-verified-badge {
    font-size: 14px !important;
    color: var(--g-500) !important;
  }

  .group-meta {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    
    font-size: 12px !important;
    color: var(--muted) !important;
  }

  .group-member-count {
    display: flex !important;
    align-items: center !important;
    gap: 4px !important;
  }

  .group-member-count i {
    font-size: 11px !important;
  }

  .group-typing-indicator {
    color: var(--g-500) !important;
    font-style: italic !important;
  }

  /* Group Header Actions */
  .group-header-actions {
    display: flex !important;
    align-items: center !important;
    gap: 4px !important;
    
    flex-shrink: 0 !important;
  }

  .group-action-btn {
    width: 40px !important;
    height: 40px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: none !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: var(--text) !important;
    font-size: 18px !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .group-action-btn:active {
    background: var(--bg) !important;
    transform: scale(0.95) !important;
  }

  /* Member Avatars Preview (in header) */
  .group-members-preview {
    display: flex !important;
    align-items: center !important;
    
    margin-top: 8px !important;
    padding-left: 56px !important;
  }

  .member-preview-avatar {
    width: 28px !important;
    height: 28px !important;
    
    border-radius: 50% !important;
    border: 2px solid var(--surface) !important;
    
    object-fit: cover !important;
    
    margin-left: -8px !important;
    
    background: var(--bg) !important;
  }

  .member-preview-avatar:first-child {
    margin-left: 0 !important;
  }

  .member-preview-more {
    width: 28px !important;
    height: 28px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--bg) !important;
    border: 2px solid var(--surface) !important;
    border-radius: 50% !important;
    
    margin-left: -8px !important;
    
    font-size: 10px !important;
    font-weight: 600 !important;
    color: var(--muted) !important;
  }

  /* -------------------------------------------------
     GROUP DETAILS MODAL (Full Screen)
     ------------------------------------------------- */
  .group-details-modal,
  .group-info-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    
    z-index: 1200 !important;
    
    background: var(--surface) !important;
    
    display: flex !important;
    flex-direction: column !important;
    
    transform: translateX(100%) !important;
    
    transition: var(--chat-transition) !important;
  }

  .group-details-modal.open,
  .group-info-modal.open {
    transform: translateX(0) !important;
  }

  /* Group Details Header */
  .group-details-header {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    height: var(--chat-header-height) !important;
    min-height: var(--chat-header-height) !important;
    
    padding: 0 16px !important;
    
    background: var(--surface) !important;
    border-bottom: 1px solid var(--line) !important;
    
    flex-shrink: 0 !important;
  }

  .group-details-back {
    width: 40px !important;
    height: 40px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: none !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: var(--text) !important;
    font-size: 20px !important;
    
    cursor: pointer !important;
    
    margin-left: -8px !important;
  }

  .group-details-title {
    flex: 1 !important;
    
    font-size: 17px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
  }

  .group-details-edit {
    width: 40px !important;
    height: 40px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: none !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: var(--g-500) !important;
    font-size: 18px !important;
    
    cursor: pointer !important;
  }

  /* Group Details Content */
  .group-details-content {
    flex: 1 !important;
    
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
  }

  /* Group Profile Section */
  .group-profile-section {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    
    padding: 30px 20px !important;
    
    background: linear-gradient(180deg, var(--bg) 0%, var(--surface) 100%) !important;
  }

  .group-profile-avatar {
    width: 100px !important;
    height: 100px !important;
    
    border-radius: 24px !important;
    
    background: linear-gradient(135deg, var(--g-500), var(--g-600)) !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    color: white !important;
    font-size: 40px !important;
    font-weight: 600 !important;
    
    margin-bottom: 16px !important;
    
    position: relative !important;
  }

  .group-profile-avatar img {
    width: 100% !important;
    height: 100% !important;
    border-radius: 24px !important;
    object-fit: cover !important;
  }

  .group-avatar-edit {
    position: absolute !important;
    bottom: -4px !important;
    right: -4px !important;
    
    width: 32px !important;
    height: 32px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--surface) !important;
    border: 2px solid var(--surface) !important;
    border-radius: 50% !important;
    
    color: var(--g-500) !important;
    font-size: 14px !important;
    
    cursor: pointer !important;
    
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
  }

  .group-profile-name {
    font-size: 22px !important;
    font-weight: 700 !important;
    color: var(--text) !important;
    
    text-align: center !important;
    
    margin-bottom: 4px !important;
  }

  .group-profile-type {
    display: inline-flex !important;
    align-items: center !important;
    gap: 6px !important;
    
    padding: 4px 12px !important;
    
    background: rgba(var(--g-500-rgb), 0.1) !important;
    border-radius: 20px !important;
    
    font-size: 12px !important;
    font-weight: 500 !important;
    color: var(--g-500) !important;
  }

  .group-profile-description {
    font-size: 14px !important;
    color: var(--muted) !important;
    text-align: center !important;
    
    max-width: 280px !important;
    
    margin-top: 12px !important;
    line-height: 1.5 !important;
  }

  /* Group Quick Actions */
  .group-quick-actions {
    display: flex !important;
    justify-content: center !important;
    gap: 24px !important;
    
    padding: 20px !important;
    
    border-bottom: 8px solid var(--bg) !important;
  }

  .group-quick-action {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    gap: 8px !important;
    
    background: none !important;
    border: none !important;
    
    cursor: pointer !important;
  }

  .group-quick-action-icon {
    width: 48px !important;
    height: 48px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--bg) !important;
    border-radius: 50% !important;
    
    font-size: 20px !important;
    color: var(--g-500) !important;
    
    transition: var(--chat-transition) !important;
  }

  .group-quick-action:active .group-quick-action-icon {
    transform: scale(0.95) !important;
    background: rgba(var(--g-500-rgb), 0.15) !important;
  }

  .group-quick-action-label {
    font-size: 12px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
  }

  /* Group Info Sections */
  .group-info-section {
    padding: 16px 20px !important;
    
    border-bottom: 8px solid var(--bg) !important;
  }

  .group-info-section:last-child {
    border-bottom: none !important;
  }

  .group-section-header {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    
    margin-bottom: 12px !important;
  }

  .group-section-title {
    font-size: 13px !important;
    font-weight: 600 !important;
    color: var(--muted) !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
  }

  .group-section-action {
    font-size: 13px !important;
    font-weight: 500 !important;
    color: var(--g-500) !important;
    
    background: none !important;
    border: none !important;
    
    cursor: pointer !important;
  }

  /* Group Info Row */
  .group-info-row {
    display: flex !important;
    align-items: center !important;
    gap: 14px !important;
    
    padding: 14px 0 !important;
    
    border-bottom: 1px solid var(--line) !important;
  }

  .group-info-row:last-child {
    border-bottom: none !important;
  }

  .group-info-icon {
    width: 36px !important;
    height: 36px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--bg) !important;
    border-radius: 10px !important;
    
    color: var(--muted) !important;
    font-size: 16px !important;
    
    flex-shrink: 0 !important;
  }

  .group-info-content {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .group-info-label {
    font-size: 12px !important;
    color: var(--muted) !important;
    margin-bottom: 2px !important;
  }

  .group-info-value {
    font-size: 15px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
  }

  .group-info-arrow {
    color: var(--muted) !important;
    font-size: 14px !important;
  }

  /* -------------------------------------------------
     MEMBERS SECTION
     ------------------------------------------------- */
  .group-members-section {
    padding: 16px 0 !important;
  }

  .group-members-header {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    
    padding: 0 20px 12px 20px !important;
  }

  .group-members-count {
    font-size: 13px !important;
    font-weight: 600 !important;
    color: var(--muted) !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
  }

  .group-add-member-btn {
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
    
    padding: 6px 12px !important;
    
    background: rgba(var(--g-500-rgb), 0.1) !important;
    border: none !important;
    border-radius: 20px !important;
    
    font-size: 13px !important;
    font-weight: 500 !important;
    color: var(--g-500) !important;
    
    cursor: pointer !important;
  }

  .group-add-member-btn i {
    font-size: 12px !important;
  }

  /* Member List */
  .group-members-list {
    display: flex !important;
    flex-direction: column !important;
  }

  .group-member-item {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    padding: 12px 20px !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .group-member-item:active {
    background: var(--bg) !important;
  }

  .group-member-avatar {
    width: 44px !important;
    height: 44px !important;
    
    border-radius: 50% !important;
    
    object-fit: cover !important;
    
    flex-shrink: 0 !important;
    
    position: relative !important;
  }

  .group-member-avatar img {
    width: 100% !important;
    height: 100% !important;
    border-radius: 50% !important;
    object-fit: cover !important;
  }

  .member-online-indicator {
    position: absolute !important;
    bottom: 0 !important;
    right: 0 !important;
    
    width: 12px !important;
    height: 12px !important;
    
    background: #22c55e !important;
    border: 2px solid var(--surface) !important;
    border-radius: 50% !important;
  }

  .group-member-info {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .group-member-name {
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
    
    font-size: 15px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
  }

  .member-role-badge {
    padding: 2px 8px !important;
    
    border-radius: 10px !important;
    
    font-size: 10px !important;
    font-weight: 600 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.3px !important;
  }

  .member-role-badge.admin {
    background: rgba(var(--g-500-rgb), 0.15) !important;
    color: var(--g-500) !important;
  }

  .member-role-badge.moderator {
    background: rgba(59, 130, 246, 0.15) !important;
    color: #3b82f6 !important;
  }

  .member-role-badge.owner {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(234, 88, 12, 0.15)) !important;
    color: #f59e0b !important;
  }

  .group-member-status {
    font-size: 13px !important;
    color: var(--muted) !important;
  }

  .group-member-status.online {
    color: #22c55e !important;
  }

  .group-member-actions {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    
    flex-shrink: 0 !important;
  }

  .member-action-btn {
    width: 36px !important;
    height: 36px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--bg) !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: var(--muted) !important;
    font-size: 14px !important;
    
    cursor: pointer !important;
  }

  .member-action-btn:active {
    background: var(--line) !important;
  }

  /* -------------------------------------------------
     CREATE GROUP FLOW
     ------------------------------------------------- */
  .create-group-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    
    z-index: 1200 !important;
    
    background: var(--surface) !important;
    
    display: flex !important;
    flex-direction: column !important;
    
    transform: translateX(100%) !important;
    
    transition: var(--chat-transition) !important;
  }

  .create-group-modal.open {
    transform: translateX(0) !important;
  }

  /* Create Group Header */
  .create-group-header {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    
    height: var(--chat-header-height) !important;
    min-height: var(--chat-header-height) !important;
    
    padding: 0 16px !important;
    
    border-bottom: 1px solid var(--line) !important;
    
    flex-shrink: 0 !important;
  }

  .create-group-cancel {
    font-size: 15px !important;
    font-weight: 500 !important;
    color: var(--muted) !important;
    
    background: none !important;
    border: none !important;
    
    cursor: pointer !important;
  }

  .create-group-title {
    font-size: 17px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
  }

  .create-group-next {
    font-size: 15px !important;
    font-weight: 600 !important;
    color: var(--g-500) !important;
    
    background: none !important;
    border: none !important;
    
    cursor: pointer !important;
  }

  .create-group-next:disabled {
    color: var(--muted) !important;
    opacity: 0.5 !important;
  }

  /* Create Group Content */
  .create-group-content {
    flex: 1 !important;
    
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
  }

  /* Step 1: Group Info */
  .create-group-info {
    padding: 24px 20px !important;
  }

  .create-group-avatar-section {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    
    margin-bottom: 24px !important;
  }

  .create-group-avatar-upload {
    width: 100px !important;
    height: 100px !important;
    
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 8px !important;
    
    background: var(--bg) !important;
    border: 2px dashed var(--line) !important;
    border-radius: 24px !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .create-group-avatar-upload:active {
    border-color: var(--g-500) !important;
    background: rgba(var(--g-500-rgb), 0.05) !important;
  }

  .create-group-avatar-upload i {
    font-size: 28px !important;
    color: var(--muted) !important;
  }

  .create-group-avatar-upload span {
    font-size: 11px !important;
    color: var(--muted) !important;
  }

  .create-group-avatar-preview {
    width: 100px !important;
    height: 100px !important;
    
    border-radius: 24px !important;
    
    object-fit: cover !important;
    
    position: relative !important;
  }

  .create-group-avatar-remove {
    position: absolute !important;
    top: -6px !important;
    right: -6px !important;
    
    width: 28px !important;
    height: 28px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: #ef4444 !important;
    border: 2px solid var(--surface) !important;
    border-radius: 50% !important;
    
    color: white !important;
    font-size: 12px !important;
    
    cursor: pointer !important;
  }

  /* Group Name Input */
  .create-group-field {
    margin-bottom: 20px !important;
  }

  .create-group-label {
    display: block !important;
    
    font-size: 13px !important;
    font-weight: 600 !important;
    color: var(--muted) !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    
    margin-bottom: 8px !important;
  }

  .create-group-input {
    width: 100% !important;
    
    padding: 14px 16px !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 12px !important;
    
    font-size: 16px !important;
    color: var(--text) !important;
  }

  .create-group-input::placeholder {
    color: var(--muted) !important;
  }

  .create-group-input:focus {
    outline: none !important;
    border-color: var(--g-500) !important;
  }

  .create-group-textarea {
    width: 100% !important;
    min-height: 100px !important;
    
    padding: 14px 16px !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 12px !important;
    
    font-size: 16px !important;
    color: var(--text) !important;
    
    resize: vertical !important;
  }

  .create-group-char-count {
    text-align: right !important;
    
    font-size: 12px !important;
    color: var(--muted) !important;
    
    margin-top: 6px !important;
  }

  /* Group Type Selection */
  .create-group-type-section {
    margin-bottom: 20px !important;
  }

  .group-type-options {
    display: flex !important;
    flex-direction: column !important;
    gap: 12px !important;
  }

  .group-type-option {
    display: flex !important;
    align-items: center !important;
    gap: 14px !important;
    
    padding: 16px !important;
    
    background: var(--bg) !important;
    border: 2px solid var(--line) !important;
    border-radius: 14px !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .group-type-option.selected {
    border-color: var(--g-500) !important;
    background: rgba(var(--g-500-rgb), 0.05) !important;
  }

  .group-type-icon {
    width: 44px !important;
    height: 44px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--surface) !important;
    border-radius: 12px !important;
    
    font-size: 20px !important;
    color: var(--muted) !important;
  }

  .group-type-option.selected .group-type-icon {
    background: var(--g-500) !important;
    color: white !important;
  }

  .group-type-content {
    flex: 1 !important;
  }

  .group-type-name {
    font-size: 15px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
  }

  .group-type-desc {
    font-size: 13px !important;
    color: var(--muted) !important;
    margin-top: 2px !important;
  }

  .group-type-check {
    width: 24px !important;
    height: 24px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    border: 2px solid var(--line) !important;
    border-radius: 50% !important;
    
    color: transparent !important;
    font-size: 12px !important;
    
    transition: var(--chat-transition) !important;
  }

  .group-type-option.selected .group-type-check {
    background: var(--g-500) !important;
    border-color: var(--g-500) !important;
    color: white !important;
  }

  /* Step 2: Add Members */
  .create-group-members {
    display: flex !important;
    flex-direction: column !important;
    height: 100% !important;
  }

  .members-search-container {
    padding: 16px 20px !important;
    
    border-bottom: 1px solid var(--line) !important;
  }

  .members-search-input {
    width: 100% !important;
    
    padding: 12px 16px 12px 44px !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 12px !important;
    
    font-size: 15px !important;
    color: var(--text) !important;
    
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%236b7280' viewBox='0 0 16 16'%3E%3Cpath d='M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z'/%3E%3C/svg%3E") !important;
    background-repeat: no-repeat !important;
    background-position: 16px center !important;
  }

  /* Selected Members Chips */
  .selected-members-container {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 8px !important;
    
    padding: 12px 20px !important;
    
    border-bottom: 1px solid var(--line) !important;
    
    max-height: 120px !important;
    overflow-y: auto !important;
  }

  .selected-member-chip {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    
    padding: 6px 10px 6px 6px !important;
    
    background: rgba(var(--g-500-rgb), 0.1) !important;
    border-radius: 20px !important;
  }

  .selected-member-chip img {
    width: 24px !important;
    height: 24px !important;
    border-radius: 50% !important;
    object-fit: cover !important;
  }

  .selected-member-chip span {
    font-size: 13px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
  }

  .selected-member-remove {
    width: 18px !important;
    height: 18px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--muted) !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: white !important;
    font-size: 10px !important;
    
    cursor: pointer !important;
  }

  /* Available Members List */
  .available-members-list {
    flex: 1 !important;
    
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
  }

  .available-member-item {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    padding: 12px 20px !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .available-member-item:active {
    background: var(--bg) !important;
  }

  .available-member-item.selected {
    background: rgba(var(--g-500-rgb), 0.08) !important;
  }

  .available-member-avatar {
    width: 44px !important;
    height: 44px !important;
    
    border-radius: 50% !important;
    
    object-fit: cover !important;
    
    flex-shrink: 0 !important;
  }

  .available-member-info {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .available-member-name {
    font-size: 15px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
  }

  .available-member-role {
    font-size: 13px !important;
    color: var(--muted) !important;
  }

  .available-member-check {
    width: 24px !important;
    height: 24px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    border: 2px solid var(--line) !important;
    border-radius: 50% !important;
    
    flex-shrink: 0 !important;
    
    transition: var(--chat-transition) !important;
  }

  .available-member-item.selected .available-member-check {
    background: var(--g-500) !important;
    border-color: var(--g-500) !important;
    color: white !important;
  }

  .available-member-check i {
    font-size: 12px !important;
    opacity: 0 !important;
  }

  .available-member-item.selected .available-member-check i {
    opacity: 1 !important;
  }

  /* Create Group Footer */
  .create-group-footer {
    padding: 16px 20px !important;
    padding-bottom: calc(16px + var(--safe-area-bottom)) !important;
    
    border-top: 1px solid var(--line) !important;
    
    flex-shrink: 0 !important;
  }

  .create-group-btn {
    width: 100% !important;
    height: 50px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 10px !important;
    
    background: linear-gradient(135deg, var(--g-500), var(--g-600)) !important;
    border: none !important;
    border-radius: 14px !important;
    
    font-size: 16px !important;
    font-weight: 600 !important;
    color: white !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .create-group-btn:active {
    transform: scale(0.98) !important;
  }

  .create-group-btn:disabled {
    opacity: 0.5 !important;
    cursor: not-allowed !important;
  }

  /* -------------------------------------------------
     GROUP SETTINGS
     ------------------------------------------------- */
  .group-settings-section {
    padding: 0 !important;
  }

  .group-setting-item {
    display: flex !important;
    align-items: center !important;
    gap: 14px !important;
    
    padding: 16px 20px !important;
    
    border-bottom: 1px solid var(--line) !important;
    
    cursor: pointer !important;
  }

  .group-setting-item:last-child {
    border-bottom: none !important;
  }

  .group-setting-item:active {
    background: var(--bg) !important;
  }

  .group-setting-icon {
    width: 36px !important;
    height: 36px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--bg) !important;
    border-radius: 10px !important;
    
    font-size: 16px !important;
    color: var(--muted) !important;
    
    flex-shrink: 0 !important;
  }

  .group-setting-content {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .group-setting-label {
    font-size: 15px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
  }

  .group-setting-value {
    font-size: 13px !important;
    color: var(--muted) !important;
    margin-top: 2px !important;
  }

  .group-setting-arrow {
    color: var(--muted) !important;
    font-size: 14px !important;
  }

  /* Danger Zone */
  .group-danger-section {
    padding: 20px !important;
    
    margin-top: 20px !important;
  }

  .group-danger-btn {
    width: 100% !important;
    
    padding: 14px !important;
    
    background: rgba(239, 68, 68, 0.1) !important;
    border: 1px solid rgba(239, 68, 68, 0.2) !important;
    border-radius: 12px !important;
    
    font-size: 15px !important;
    font-weight: 500 !important;
    color: #ef4444 !important;
    
    cursor: pointer !important;
    
    margin-bottom: 12px !important;
  }

  .group-danger-btn:last-child {
    margin-bottom: 0 !important;
  }

  .group-danger-btn:active {
    background: rgba(239, 68, 68, 0.15) !important;
  }

  .group-danger-btn i {
    margin-right: 8px !important;
  }

  /* -------------------------------------------------
     MEMBER ACTION SHEET
     ------------------------------------------------- */
  .member-action-sheet {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    
    z-index: 1300 !important;
    
    display: flex !important;
    align-items: flex-end !important;
    justify-content: center !important;
    
    background: rgba(0, 0, 0, 0.5) !important;
    
    opacity: 0 !important;
    visibility: hidden !important;
    
    transition: var(--chat-transition) !important;
  }

  .member-action-sheet.open {
    opacity: 1 !important;
    visibility: visible !important;
  }

  .member-action-content {
    width: 100% !important;
    max-width: 100% !important;
    
    background: var(--surface) !important;
    border-radius: var(--chat-radius-lg) var(--chat-radius-lg) 0 0 !important;
    
    padding-bottom: var(--safe-area-bottom) !important;
    
    transform: translateY(100%) !important;
    
    transition: var(--chat-transition) !important;
  }

  .member-action-sheet.open .member-action-content {
    transform: translateY(0) !important;
  }

  /* Member Action Header */
  .member-action-header {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    padding: 16px 20px !important;
    
    border-bottom: 1px solid var(--line) !important;
  }

  .member-action-avatar {
    width: 48px !important;
    height: 48px !important;
    
    border-radius: 50% !important;
    
    object-fit: cover !important;
  }

  .member-action-info {
    flex: 1 !important;
  }

  .member-action-name {
    font-size: 16px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
  }

  .member-action-role {
    font-size: 13px !important;
    color: var(--muted) !important;
  }

  /* Action Options */
  .member-action-options {
    padding: 8px 0 !important;
  }

  .member-action-option {
    display: flex !important;
    align-items: center !important;
    gap: 14px !important;
    
    width: 100% !important;
    
    padding: 14px 20px !important;
    
    background: none !important;
    border: none !important;
    
    font-size: 15px !important;
    color: var(--text) !important;
    text-align: left !important;
    
    cursor: pointer !important;
  }

  .member-action-option:active {
    background: var(--bg) !important;
  }

  .member-action-option i {
    width: 24px !important;
    font-size: 18px !important;
    color: var(--muted) !important;
    text-align: center !important;
  }

  .member-action-option.danger {
    color: #ef4444 !important;
  }

  .member-action-option.danger i {
    color: #ef4444 !important;
  }

  /* Cancel Button */
  .member-action-cancel {
    width: calc(100% - 40px) !important;
    
    margin: 8px 20px 16px 20px !important;
    padding: 14px !important;
    
    background: var(--bg) !important;
    border: none !important;
    border-radius: 12px !important;
    
    font-size: 15px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    
    cursor: pointer !important;
  }

  /* =====================================================
     PHASE 7: CIRCULARS FEED (MOBILE)
     =====================================================
     Circular/announcement feed view, post composer,
     feed posts, comments, reactions, image grid
     ===================================================== */

  /* -------------------------------------------------
     MOBILE FEED BUTTON (In Circulars List)
     ------------------------------------------------- */
  .view-feed-mobile-btn {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    gap: 12px !important;
    
    width: calc(100% - 32px) !important;
    margin: 16px !important;
    padding: 16px 20px !important;
    
    background: linear-gradient(135deg, var(--g-500), var(--g-600)) !important;
    border: none !important;
    border-radius: 12px !important;
    
    color: white !important;
    font-size: 15px !important;
    font-weight: 600 !important;
    
    cursor: pointer !important;
    
    box-shadow: 0 4px 12px rgba(var(--g-500-rgb), 0.3) !important;
    
    transition: all 0.2s ease !important;
  }

  .view-feed-mobile-btn:active {
    transform: scale(0.98) !important;
    box-shadow: 0 2px 8px rgba(var(--g-500-rgb), 0.2) !important;
  }

  .view-feed-mobile-btn i:first-child {
    font-size: 20px !important;
  }

  .view-feed-mobile-btn span {
    flex: 1 !important;
    text-align: left !important;
  }

  .view-feed-mobile-btn i:last-child {
    font-size: 18px !important;
    opacity: 0.8 !important;
  }

  /* Hide desktop hint on mobile */
  .view-all-feed-hint.desktop-only,
  .view-all-feed-hint {
    display: none !important;
  }

  /* -------------------------------------------------
     MOBILE FEED VISIBILITY
     ------------------------------------------------- */
  /* When circulars tab AND mobile feed button clicked */
  .chat-area.mobile-feed-visible {
    transform: translateX(0) !important;
  }

  /* -------------------------------------------------
     CIRCULARS TAB VIEW
     ------------------------------------------------- */
  .circulars-feed-container,
  .announcements-container {
    display: flex !important;
    flex-direction: column !important;
    
    height: 100% !important;
    
    background: var(--bg) !important;
  }

  /* Circulars Header */
  .circulars-header {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    
    height: var(--chat-header-height) !important;
    min-height: var(--chat-header-height) !important;
    
    padding: 0 12px !important;
    
    background: var(--surface) !important;
    border-bottom: 1px solid var(--line) !important;
    
    flex-shrink: 0 !important;
    
    gap: 8px !important;
  }

  /* Circulars Header Left - Contains Back Button + Info */
  .circulars-header-left {
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
    
    flex: 1 !important;
    min-width: 0 !important;
  }

  /* BACK BUTTON IN CIRCULARS FEED - CRITICAL FIX */
  .circulars-header-left .back-btn,
  .circulars-header-left .back-btn.mobile-only {
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    
    width: 40px !important;
    height: 40px !important;
    min-width: 40px !important;
    min-height: 40px !important;
    
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 10px !important;
    
    color: var(--text) !important;
    font-size: 18px !important;
    
    cursor: pointer !important;
    flex-shrink: 0 !important;
    
    pointer-events: auto !important;
    position: relative !important;
    z-index: 50 !important;
    
    -webkit-tap-highlight-color: transparent !important;
    touch-action: manipulation !important;
  }

  .circulars-header-left .back-btn:active {
    background: var(--line) !important;
    transform: scale(0.95) !important;
  }

  .circulars-header-left .back-btn i {
    display: flex !important;
    pointer-events: none !important;
  }

  /* Circulars Header Info */
  .circulars-header-info {
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
    
    flex: 1 !important;
    min-width: 0 !important;
  }

  .circulars-icon {
    width: 40px !important;
    height: 40px !important;
    min-width: 40px !important;
    
    border-radius: 10px !important;
    background: linear-gradient(135deg, var(--g-500), var(--g-600)) !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    flex-shrink: 0 !important;
  }

  .circulars-icon i {
    font-size: 18px !important;
    color: white !important;
  }

  .circulars-title {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .circulars-title h3 {
    font-size: 15px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    margin: 0 0 1px 0 !important;
    
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }

  .circulars-title p {
    font-size: 12px !important;
    color: var(--muted) !important;
    margin: 0 !important;
  }

  .circulars-filter-btn {
    width: 40px !important;
    height: 40px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--bg) !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: var(--text) !important;
    font-size: 18px !important;
    
    cursor: pointer !important;
    flex-shrink: 0 !important;
  }

  /* Filter Chips */
  .circulars-filters {
    display: flex !important;
    gap: 8px !important;
    
    padding: 12px 16px !important;
    
    background: var(--surface) !important;
    border-bottom: 1px solid var(--line) !important;
    
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
    
    scrollbar-width: none !important;
    -ms-overflow-style: none !important;
  }

  .circulars-filters::-webkit-scrollbar {
    display: none !important;
  }

  .filter-chip {
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
    
    padding: 8px 14px !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 20px !important;
    
    font-size: 13px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
    
    white-space: nowrap !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .filter-chip.active {
    background: var(--g-500) !important;
    border-color: var(--g-500) !important;
    color: white !important;
  }

  .filter-chip i {
    font-size: 12px !important;
  }

  .filter-chip .count {
    padding: 2px 6px !important;
    
    background: rgba(255, 255, 255, 0.2) !important;
    border-radius: 10px !important;
    
    font-size: 11px !important;
    font-weight: 600 !important;
  }

  .filter-chip.active .count {
    background: rgba(255, 255, 255, 0.3) !important;
  }

  /* View Toggle in Circulars Header - Compact for Mobile */
  .circulars-view-toggle {
    display: flex !important;
    
    background: var(--bg) !important;
    border-radius: 8px !important;
    padding: 3px !important;
    gap: 2px !important;
    
    flex-shrink: 0 !important;
  }

  .view-toggle-btn {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 4px !important;
    
    padding: 8px 10px !important;
    
    border: none !important;
    background: transparent !important;
    border-radius: 6px !important;
    
    color: var(--muted) !important;
    font-size: 12px !important;
    font-weight: 500 !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .view-toggle-btn i {
    font-size: 15px !important;
  }

  .view-toggle-btn span {
    display: none !important;
  }

  .view-toggle-btn.active {
    background: var(--surface) !important;
    color: var(--g-500) !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08) !important;
  }

  /* -------------------------------------------------
     POST COMPOSER
     ------------------------------------------------- */
  .post-composer,
  .circular-composer {
    display: flex !important;
    align-items: flex-start !important;
    gap: 12px !important;
    
    padding: 16px !important;
    
    background: var(--surface) !important;
    border-bottom: 8px solid var(--bg) !important;
  }

  .composer-avatar {
    width: 40px !important;
    height: 40px !important;
    
    border-radius: 50% !important;
    
    object-fit: cover !important;
    
    flex-shrink: 0 !important;
  }

  .composer-input-area {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .composer-input {
    width: 100% !important;
    min-height: 44px !important;
    
    padding: 12px 16px !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 22px !important;
    
    font-size: 15px !important;
    color: var(--text) !important;
    
    resize: none !important;
    
    transition: var(--chat-transition) !important;
  }

  .composer-input::placeholder {
    color: var(--muted) !important;
  }

  .composer-input:focus {
    outline: none !important;
    border-color: var(--g-500) !important;
    border-radius: 16px !important;
    min-height: 100px !important;
  }

  /* Composer Actions */
  .composer-actions {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    
    margin-top: 12px !important;
    
    opacity: 0 !important;
    max-height: 0 !important;
    overflow: hidden !important;
    
    transition: var(--chat-transition) !important;
  }

  .composer-input:focus ~ .composer-actions,
  .composer-actions.visible {
    opacity: 1 !important;
    max-height: 50px !important;
  }

  .composer-attachments {
    display: flex !important;
    gap: 4px !important;
  }

  .composer-attach-btn {
    width: 40px !important;
    height: 40px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: none !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: var(--muted) !important;
    font-size: 18px !important;
    
    cursor: pointer !important;
  }

  .composer-attach-btn:active {
    background: var(--bg) !important;
    color: var(--g-500) !important;
  }

  .composer-post-btn {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    
    padding: 10px 20px !important;
    
    background: linear-gradient(135deg, var(--g-500), var(--g-600)) !important;
    border: none !important;
    border-radius: 20px !important;
    
    font-size: 14px !important;
    font-weight: 600 !important;
    color: white !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .composer-post-btn:disabled {
    opacity: 0.5 !important;
    cursor: not-allowed !important;
  }

  .composer-post-btn:active:not(:disabled) {
    transform: scale(0.98) !important;
  }

  /* Composer Media Preview */
  .composer-media-preview {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 8px !important;
    
    margin-top: 12px !important;
  }

  .composer-media-item {
    position: relative !important;
    
    width: 80px !important;
    height: 80px !important;
    
    border-radius: 12px !important;
    overflow: hidden !important;
  }

  .composer-media-item img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
  }

  .composer-media-remove {
    position: absolute !important;
    top: 4px !important;
    right: 4px !important;
    
    width: 24px !important;
    height: 24px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: rgba(0, 0, 0, 0.6) !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: white !important;
    font-size: 12px !important;
    
    cursor: pointer !important;
  }

  /* -------------------------------------------------
     FEED POSTS
     ------------------------------------------------- */
  .circulars-feed,
  .posts-feed {
    flex: 1 !important;
    
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    
    padding-bottom: var(--safe-area-bottom) !important;
  }

  .feed-post,
  .circular-post {
    background: var(--surface) !important;
    
    margin-bottom: 8px !important;
  }

  /* Post Header */
  .post-header {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    padding: 14px 16px !important;
  }

  .post-author-avatar {
    width: 44px !important;
    height: 44px !important;
    
    border-radius: 50% !important;
    
    object-fit: cover !important;
    
    flex-shrink: 0 !important;
  }

  .post-author-info {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .post-author-name {
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
    
    font-size: 15px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
  }

  .post-author-badge {
    display: inline-flex !important;
    align-items: center !important;
    gap: 4px !important;
    
    padding: 2px 8px !important;
    
    background: rgba(var(--g-500-rgb), 0.1) !important;
    border-radius: 10px !important;
    
    font-size: 10px !important;
    font-weight: 600 !important;
    color: var(--g-500) !important;
    text-transform: uppercase !important;
  }

  .post-meta {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    
    font-size: 12px !important;
    color: var(--muted) !important;
    
    margin-top: 2px !important;
  }

  .post-meta-dot {
    width: 3px !important;
    height: 3px !important;
    
    background: var(--muted) !important;
    border-radius: 50% !important;
  }

  .post-options-btn {
    width: 36px !important;
    height: 36px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: none !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: var(--muted) !important;
    font-size: 18px !important;
    
    cursor: pointer !important;
  }

  /* Post Type Badge */
  .post-type-badge {
    display: inline-flex !important;
    align-items: center !important;
    gap: 6px !important;
    
    margin: 0 16px 12px 16px !important;
    padding: 6px 12px !important;
    
    border-radius: 8px !important;
    
    font-size: 12px !important;
    font-weight: 600 !important;
  }

  .post-type-badge.announcement {
    background: rgba(239, 68, 68, 0.1) !important;
    color: #ef4444 !important;
  }

  .post-type-badge.update {
    background: rgba(59, 130, 246, 0.1) !important;
    color: #3b82f6 !important;
  }

  .post-type-badge.event {
    background: rgba(168, 85, 247, 0.1) !important;
    color: #a855f7 !important;
  }

  .post-type-badge.policy {
    background: rgba(245, 158, 11, 0.1) !important;
    color: #f59e0b !important;
  }

  .post-type-badge i {
    font-size: 12px !important;
  }

  /* Post Content */
  .post-content {
    padding: 0 16px 14px 16px !important;
  }

  .post-text {
    font-size: 15px !important;
    line-height: 1.6 !important;
    color: var(--text) !important;
    
    white-space: pre-wrap !important;
    word-wrap: break-word !important;
  }

  .post-text.truncated {
    display: -webkit-box !important;
    -webkit-line-clamp: 5 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
  }

  .post-read-more {
    display: inline !important;
    
    margin-top: 8px !important;
    
    font-size: 14px !important;
    font-weight: 600 !important;
    color: var(--g-500) !important;
    
    background: none !important;
    border: none !important;
    
    cursor: pointer !important;
  }

  /* Post Hashtags */
  .post-hashtags {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 8px !important;
    
    margin-top: 12px !important;
  }

  .post-hashtag {
    font-size: 14px !important;
    font-weight: 500 !important;
    color: var(--g-500) !important;
    
    cursor: pointer !important;
  }

  /* -------------------------------------------------
     POST MEDIA / IMAGE GRID
     ------------------------------------------------- */
  .post-media {
    margin: 0 0 12px 0 !important;
  }

  /* Single Image */
  .post-media.single {
    width: 100% !important;
    max-height: 400px !important;
    
    overflow: hidden !important;
  }

  .post-media.single img {
    width: 100% !important;
    height: 100% !important;
    max-height: 400px !important;
    object-fit: cover !important;
  }

  /* Two Images Grid */
  .post-media.grid-2 {
    display: grid !important;
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 2px !important;
  }

  .post-media.grid-2 img {
    width: 100% !important;
    height: 200px !important;
    object-fit: cover !important;
  }

  /* Three Images Grid */
  .post-media.grid-3 {
    display: grid !important;
    grid-template-columns: repeat(2, 1fr) !important;
    grid-template-rows: repeat(2, 1fr) !important;
    gap: 2px !important;
  }

  .post-media.grid-3 img:first-child {
    grid-row: span 2 !important;
    height: 100% !important;
  }

  .post-media.grid-3 img {
    width: 100% !important;
    height: 150px !important;
    object-fit: cover !important;
  }

  /* Four+ Images Grid */
  .post-media.grid-4 {
    display: grid !important;
    grid-template-columns: repeat(2, 1fr) !important;
    grid-template-rows: repeat(2, 1fr) !important;
    gap: 2px !important;
  }

  .post-media.grid-4 img {
    width: 100% !important;
    height: 150px !important;
    object-fit: cover !important;
  }

  .post-media-more {
    position: relative !important;
  }

  .post-media-more::after {
    content: attr(data-count) !important;
    
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: rgba(0, 0, 0, 0.6) !important;
    
    font-size: 24px !important;
    font-weight: 700 !important;
    color: white !important;
  }

  /* Post Video */
  .post-video {
    position: relative !important;
    
    width: 100% !important;
    aspect-ratio: 16/9 !important;
    
    background: #000 !important;
  }

  .post-video video {
    width: 100% !important;
    height: 100% !important;
    object-fit: contain !important;
  }

  .video-play-btn {
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    
    width: 60px !important;
    height: 60px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: rgba(0, 0, 0, 0.6) !important;
    backdrop-filter: blur(4px) !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: white !important;
    font-size: 24px !important;
    
    cursor: pointer !important;
  }

  /* -------------------------------------------------
     POST DOCUMENT ATTACHMENT
     ------------------------------------------------- */
  .post-document {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    margin: 0 16px 12px 16px !important;
    padding: 14px !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 12px !important;
  }

  .post-document-icon {
    width: 44px !important;
    height: 44px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    border-radius: 10px !important;
    
    font-size: 20px !important;
  }

  .post-document-info {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .post-document-name {
    font-size: 14px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }

  .post-document-meta {
    font-size: 12px !important;
    color: var(--muted) !important;
    margin-top: 2px !important;
  }

  .post-document-download {
    width: 40px !important;
    height: 40px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--surface) !important;
    border: 1px solid var(--line) !important;
    border-radius: 50% !important;
    
    color: var(--g-500) !important;
    font-size: 16px !important;
    
    cursor: pointer !important;
  }

  /* -------------------------------------------------
     POST REACTIONS & STATS
     ------------------------------------------------- */
  .post-stats {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    
    padding: 10px 16px !important;
    
    border-top: 1px solid var(--line) !important;
    border-bottom: 1px solid var(--line) !important;
  }

  .post-reactions-summary {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
  }

  .reactions-icons {
    display: flex !important;
  }

  .reaction-icon {
    width: 22px !important;
    height: 22px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    border-radius: 50% !important;
    border: 2px solid var(--surface) !important;
    
    font-size: 12px !important;
    
    margin-left: -6px !important;
  }

  .reaction-icon:first-child {
    margin-left: 0 !important;
  }

  .reaction-icon.like {
    background: #3b82f6 !important;
  }

  .reaction-icon.love {
    background: #ef4444 !important;
  }

  .reaction-icon.celebrate {
    background: #f59e0b !important;
  }

  .reactions-count {
    font-size: 13px !important;
    color: var(--muted) !important;
  }

  .post-engagement {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    font-size: 13px !important;
    color: var(--muted) !important;
  }

  /* -------------------------------------------------
     POST ACTIONS
     ------------------------------------------------- */
  .post-actions {
    display: flex !important;
    
    padding: 8px 12px !important;
  }

  .post-action-btn {
    flex: 1 !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 8px !important;
    
    height: 44px !important;
    min-height: var(--chat-touch-target) !important;
    
    background: none !important;
    border: none !important;
    border-radius: 10px !important;
    
    font-size: 14px !important;
    font-weight: 500 !important;
    color: var(--muted) !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .post-action-btn:active {
    background: var(--bg) !important;
  }

  .post-action-btn.active {
    color: var(--g-500) !important;
  }

  .post-action-btn.liked {
    color: #3b82f6 !important;
  }

  .post-action-btn i {
    font-size: 18px !important;
  }

  /* Reaction Picker (on long press) */
  .reaction-picker {
    position: absolute !important;
    bottom: 100% !important;
    left: 0 !important;
    
    display: flex !important;
    gap: 4px !important;
    
    padding: 8px 12px !important;
    margin-bottom: 8px !important;
    
    background: var(--surface) !important;
    border-radius: 30px !important;
    
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15) !important;
    
    opacity: 0 !important;
    visibility: hidden !important;
    transform: scale(0.8) translateY(10px) !important;
    
    transition: var(--chat-transition) !important;
  }

  .reaction-picker.visible {
    opacity: 1 !important;
    visibility: visible !important;
    transform: scale(1) translateY(0) !important;
  }

  .reaction-option {
    width: 40px !important;
    height: 40px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: none !important;
    border: none !important;
    
    font-size: 24px !important;
    
    cursor: pointer !important;
    
    transition: transform 0.2s !important;
  }

  .reaction-option:active {
    transform: scale(1.3) !important;
  }

  /* -------------------------------------------------
     COMMENTS SECTION
     ------------------------------------------------- */
  .post-comments {
    padding: 0 16px 16px 16px !important;
  }

  .comments-header {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    
    padding: 12px 0 !important;
  }

  .comments-title {
    font-size: 14px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
  }

  .comments-sort {
    font-size: 13px !important;
    color: var(--g-500) !important;
    
    background: none !important;
    border: none !important;
    
    cursor: pointer !important;
  }

  /* Comment Item */
  .comment-item {
    display: flex !important;
    gap: 10px !important;
    
    padding: 12px 0 !important;
  }

  .comment-avatar {
    width: 36px !important;
    height: 36px !important;
    
    border-radius: 50% !important;
    
    object-fit: cover !important;
    
    flex-shrink: 0 !important;
  }

  .comment-content {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .comment-bubble {
    padding: 10px 14px !important;
    
    background: var(--bg) !important;
    border-radius: 16px !important;
    border-top-left-radius: 4px !important;
  }

  .comment-author {
    font-size: 13px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    
    margin-bottom: 2px !important;
  }

  .comment-text {
    font-size: 14px !important;
    line-height: 1.5 !important;
    color: var(--text) !important;
  }

  .comment-actions {
    display: flex !important;
    align-items: center !important;
    gap: 16px !important;
    
    padding: 6px 0 0 4px !important;
  }

  .comment-action {
    font-size: 12px !important;
    font-weight: 500 !important;
    color: var(--muted) !important;
    
    background: none !important;
    border: none !important;
    
    cursor: pointer !important;
  }

  .comment-action.active {
    color: var(--g-500) !important;
  }

  .comment-time {
    font-size: 12px !important;
    color: var(--muted) !important;
  }

  /* Reply to Comment */
  .comment-replies {
    margin-top: 12px !important;
    padding-left: 12px !important;
    
    border-left: 2px solid var(--line) !important;
  }

  .show-replies-btn {
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
    
    padding: 8px 0 !important;
    
    font-size: 13px !important;
    font-weight: 500 !important;
    color: var(--g-500) !important;
    
    background: none !important;
    border: none !important;
    
    cursor: pointer !important;
  }

  /* Comment Input */
  .comment-input-container {
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
    
    padding: 12px 16px !important;
    
    background: var(--surface) !important;
    border-top: 1px solid var(--line) !important;
  }

  .comment-input-avatar {
    width: 32px !important;
    height: 32px !important;
    
    border-radius: 50% !important;
    
    object-fit: cover !important;
    
    flex-shrink: 0 !important;
  }

  .comment-input-wrapper {
    flex: 1 !important;
    
    display: flex !important;
    align-items: center !important;
    
    padding: 8px 16px !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 22px !important;
  }

  .comment-input {
    flex: 1 !important;
    
    border: none !important;
    background: none !important;
    
    font-size: 14px !important;
    color: var(--text) !important;
  }

  .comment-input::placeholder {
    color: var(--muted) !important;
  }

  .comment-input:focus {
    outline: none !important;
  }

  .comment-send-btn {
    width: 32px !important;
    height: 32px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--g-500) !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: white !important;
    font-size: 14px !important;
    
    cursor: pointer !important;
    
    margin-left: 8px !important;
    
    opacity: 0.5 !important;
    
    transition: var(--chat-transition) !important;
  }

  .comment-send-btn.active {
    opacity: 1 !important;
  }

  /* -------------------------------------------------
     CREATE CIRCULAR MODAL
     ------------------------------------------------- */
  .create-circular-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    
    z-index: 1200 !important;
    
    background: var(--surface) !important;
    
    display: flex !important;
    flex-direction: column !important;
    
    transform: translateY(100%) !important;
    
    transition: var(--chat-transition) !important;
  }

  .create-circular-modal.open {
    transform: translateY(0) !important;
  }

  /* Create Circular Header */
  .create-circular-header {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    
    height: var(--chat-header-height) !important;
    min-height: var(--chat-header-height) !important;
    
    padding: 0 16px !important;
    
    border-bottom: 1px solid var(--line) !important;
    
    flex-shrink: 0 !important;
  }

  .create-circular-cancel {
    font-size: 15px !important;
    font-weight: 500 !important;
    color: var(--muted) !important;
    
    background: none !important;
    border: none !important;
    
    cursor: pointer !important;
  }

  .create-circular-title {
    font-size: 17px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
  }

  .create-circular-post {
    font-size: 15px !important;
    font-weight: 600 !important;
    color: var(--g-500) !important;
    
    background: none !important;
    border: none !important;
    
    cursor: pointer !important;
  }

  .create-circular-post:disabled {
    color: var(--muted) !important;
    opacity: 0.5 !important;
  }

  /* Create Circular Content */
  .create-circular-content {
    flex: 1 !important;
    
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    
    padding: 16px !important;
  }

  /* Circular Type Selection */
  .circular-type-section {
    margin-bottom: 20px !important;
  }

  .circular-type-label {
    font-size: 13px !important;
    font-weight: 600 !important;
    color: var(--muted) !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    
    margin-bottom: 10px !important;
  }

  .circular-type-options {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 8px !important;
  }

  .circular-type-btn {
    display: flex !important;
    align-items: center !important;
    gap: 6px !important;
    
    padding: 10px 14px !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 20px !important;
    
    font-size: 13px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .circular-type-btn.selected {
    background: rgba(var(--g-500-rgb), 0.1) !important;
    border-color: var(--g-500) !important;
    color: var(--g-500) !important;
  }

  .circular-type-btn i {
    font-size: 14px !important;
  }

  /* Circular Text Input */
  .circular-text-input {
    width: 100% !important;
    min-height: 150px !important;
    
    padding: 0 !important;
    
    border: none !important;
    background: none !important;
    
    font-size: 18px !important;
    line-height: 1.6 !important;
    color: var(--text) !important;
    
    resize: none !important;
  }

  .circular-text-input::placeholder {
    color: var(--muted) !important;
  }

  .circular-text-input:focus {
    outline: none !important;
  }

  /* Circular Media Preview */
  .circular-media-section {
    margin-top: 16px !important;
  }

  .circular-media-grid {
    display: grid !important;
    grid-template-columns: repeat(3, 1fr) !important;
    gap: 8px !important;
  }

  .circular-media-item {
    position: relative !important;
    
    aspect-ratio: 1 !important;
    
    border-radius: 12px !important;
    overflow: hidden !important;
  }

  .circular-media-item img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
  }

  .circular-media-remove {
    position: absolute !important;
    top: 6px !important;
    right: 6px !important;
    
    width: 28px !important;
    height: 28px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: rgba(0, 0, 0, 0.6) !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: white !important;
    font-size: 14px !important;
    
    cursor: pointer !important;
  }

  /* Create Circular Footer */
  .create-circular-footer {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    
    padding: 12px 16px !important;
    padding-bottom: calc(12px + var(--safe-area-bottom)) !important;
    
    border-top: 1px solid var(--line) !important;
    
    flex-shrink: 0 !important;
  }

  .circular-attach-options {
    display: flex !important;
    gap: 8px !important;
  }

  .circular-attach-btn {
    width: 44px !important;
    height: 44px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--bg) !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: var(--muted) !important;
    font-size: 20px !important;
    
    cursor: pointer !important;
  }

  .circular-attach-btn:active {
    background: var(--line) !important;
    color: var(--g-500) !important;
  }

  .circular-char-count {
    font-size: 13px !important;
    color: var(--muted) !important;
  }

  .circular-char-count.warning {
    color: #f59e0b !important;
  }

  .circular-char-count.error {
    color: #ef4444 !important;
  }

  /* =====================================================
     PHASE 8: MODALS & OVERLAYS
     =====================================================
     Profile modal, image viewer, context menus,
     confirmation dialogs, action sheets, tooltips
     ===================================================== */

  /* -------------------------------------------------
     USER PROFILE MODAL
     ------------------------------------------------- */
  .user-profile-modal,
  .profile-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    
    z-index: 1300 !important;
    
    background: var(--surface) !important;
    
    display: flex !important;
    flex-direction: column !important;
    
    transform: translateX(100%) !important;
    
    transition: var(--chat-transition) !important;
  }

  .user-profile-modal.open,
  .profile-modal.open {
    transform: translateX(0) !important;
  }

  /* Profile Modal Header */
  .profile-modal-header {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    height: var(--chat-header-height) !important;
    min-height: var(--chat-header-height) !important;
    
    padding: 0 16px !important;
    
    background: var(--surface) !important;
    border-bottom: 1px solid var(--line) !important;
    
    flex-shrink: 0 !important;
  }

  .profile-modal-back {
    width: 40px !important;
    height: 40px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: none !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: var(--text) !important;
    font-size: 20px !important;
    
    cursor: pointer !important;
    
    margin-left: -8px !important;
  }

  .profile-modal-title {
    flex: 1 !important;
    
    font-size: 17px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
  }

  .profile-modal-action {
    width: 40px !important;
    height: 40px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: none !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: var(--muted) !important;
    font-size: 18px !important;
    
    cursor: pointer !important;
  }

  /* Profile Modal Content */
  .profile-modal-content {
    flex: 1 !important;
    
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
  }

  /* Profile Header Section */
  .profile-header-section {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    
    padding: 30px 20px !important;
    
    background: linear-gradient(180deg, var(--bg) 0%, var(--surface) 100%) !important;
  }

  .profile-avatar-large {
    width: 120px !important;
    height: 120px !important;
    
    border-radius: 50% !important;
    
    object-fit: cover !important;
    
    border: 4px solid var(--surface) !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15) !important;
    
    margin-bottom: 16px !important;
  }

  .profile-name-large {
    font-size: 24px !important;
    font-weight: 700 !important;
    color: var(--text) !important;
    
    text-align: center !important;
    
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
  }

  .profile-verified-icon {
    color: var(--g-500) !important;
    font-size: 20px !important;
  }

  .profile-role {
    font-size: 15px !important;
    color: var(--muted) !important;
    
    margin-top: 4px !important;
  }

  .profile-status {
    display: inline-flex !important;
    align-items: center !important;
    gap: 6px !important;
    
    margin-top: 12px !important;
    padding: 6px 14px !important;
    
    background: var(--bg) !important;
    border-radius: 20px !important;
    
    font-size: 13px !important;
    color: var(--text) !important;
  }

  .profile-status-dot {
    width: 8px !important;
    height: 8px !important;
    border-radius: 50% !important;
  }

  .profile-status-dot.online {
    background: #22c55e !important;
  }

  .profile-status-dot.offline {
    background: var(--muted) !important;
  }

  .profile-status-dot.away {
    background: #f59e0b !important;
  }

  /* Profile Quick Actions */
  .profile-quick-actions {
    display: flex !important;
    justify-content: center !important;
    gap: 20px !important;
    
    padding: 20px !important;
    
    border-bottom: 8px solid var(--bg) !important;
  }

  .profile-quick-btn {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    gap: 8px !important;
    
    min-width: 70px !important;
    
    background: none !important;
    border: none !important;
    
    cursor: pointer !important;
  }

  .profile-quick-btn-icon {
    width: 50px !important;
    height: 50px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--bg) !important;
    border-radius: 50% !important;
    
    font-size: 20px !important;
    color: var(--g-500) !important;
    
    transition: var(--chat-transition) !important;
  }

  .profile-quick-btn:active .profile-quick-btn-icon {
    transform: scale(0.95) !important;
    background: rgba(var(--g-500-rgb), 0.15) !important;
  }

  .profile-quick-btn-label {
    font-size: 12px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
  }

  /* Profile Info Sections */
  .profile-info-section {
    padding: 16px 20px !important;
    
    border-bottom: 8px solid var(--bg) !important;
  }

  .profile-section-title {
    font-size: 13px !important;
    font-weight: 600 !important;
    color: var(--muted) !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    
    margin-bottom: 12px !important;
  }

  .profile-info-row {
    display: flex !important;
    align-items: center !important;
    gap: 14px !important;
    
    padding: 14px 0 !important;
    
    border-bottom: 1px solid var(--line) !important;
  }

  .profile-info-row:last-child {
    border-bottom: none !important;
  }

  .profile-info-icon {
    width: 36px !important;
    height: 36px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--bg) !important;
    border-radius: 10px !important;
    
    color: var(--muted) !important;
    font-size: 16px !important;
    
    flex-shrink: 0 !important;
  }

  .profile-info-content {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .profile-info-label {
    font-size: 12px !important;
    color: var(--muted) !important;
    margin-bottom: 2px !important;
  }

  .profile-info-value {
    font-size: 15px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
    
    word-break: break-all !important;
  }

  .profile-info-action {
    color: var(--g-500) !important;
    font-size: 14px !important;
    
    flex-shrink: 0 !important;
  }

  /* Blockchain Info */
  .profile-blockchain-section {
    padding: 16px 20px !important;
  }

  .blockchain-wallet-card {
    display: flex !important;
    align-items: center !important;
    gap: 14px !important;
    
    padding: 16px !important;
    
    background: linear-gradient(135deg, rgba(var(--g-500-rgb), 0.08), rgba(var(--g-600-rgb), 0.12)) !important;
    border: 1px solid rgba(var(--g-500-rgb), 0.2) !important;
    border-radius: 14px !important;
  }

  .wallet-icon {
    width: 44px !important;
    height: 44px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--g-500) !important;
    border-radius: 12px !important;
    
    color: white !important;
    font-size: 20px !important;
  }

  .wallet-info {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .wallet-label {
    font-size: 12px !important;
    color: var(--muted) !important;
  }

  .wallet-address {
    font-family: 'SF Mono', 'Fira Code', monospace !important;
    font-size: 13px !important;
    color: var(--text) !important;
    
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }

  .wallet-copy-btn {
    width: 36px !important;
    height: 36px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--surface) !important;
    border: none !important;
    border-radius: 8px !important;
    
    color: var(--g-500) !important;
    font-size: 16px !important;
    
    cursor: pointer !important;
  }

  /* -------------------------------------------------
     IMAGE VIEWER / LIGHTBOX
     ------------------------------------------------- */
  .image-viewer,
  .lightbox-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    
    z-index: 1400 !important;
    
    background: rgba(0, 0, 0, 0.95) !important;
    
    display: flex !important;
    flex-direction: column !important;
    
    opacity: 0 !important;
    visibility: hidden !important;
    
    transition: var(--chat-transition) !important;
  }

  .image-viewer.open,
  .lightbox-modal.open {
    opacity: 1 !important;
    visibility: visible !important;
  }

  /* Image Viewer Header */
  .image-viewer-header {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    
    height: var(--chat-header-height) !important;
    
    padding: 0 16px !important;
    padding-top: var(--safe-area-top) !important;
    
    background: linear-gradient(180deg, rgba(0, 0, 0, 0.6) 0%, transparent 100%) !important;
    
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    
    z-index: 1 !important;
  }

  .image-viewer-close {
    width: 44px !important;
    height: 44px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: rgba(255, 255, 255, 0.1) !important;
    backdrop-filter: blur(10px) !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: white !important;
    font-size: 20px !important;
    
    cursor: pointer !important;
  }

  .image-viewer-counter {
    font-size: 15px !important;
    font-weight: 500 !important;
    color: white !important;
  }

  .image-viewer-actions {
    display: flex !important;
    gap: 8px !important;
  }

  .image-viewer-action {
    width: 44px !important;
    height: 44px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: rgba(255, 255, 255, 0.1) !important;
    backdrop-filter: blur(10px) !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: white !important;
    font-size: 18px !important;
    
    cursor: pointer !important;
  }

  /* Image Container */
  .image-viewer-container {
    flex: 1 !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    overflow: hidden !important;
    
    touch-action: pan-x pan-y pinch-zoom !important;
  }

  .image-viewer-img {
    max-width: 100% !important;
    max-height: 100% !important;
    
    object-fit: contain !important;
    
    user-select: none !important;
    -webkit-user-drag: none !important;
    
    transition: transform 0.2s ease !important;
  }

  /* Image Viewer Footer */
  .image-viewer-footer {
    position: absolute !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    
    padding: 16px !important;
    padding-bottom: calc(16px + var(--safe-area-bottom)) !important;
    
    background: linear-gradient(0deg, rgba(0, 0, 0, 0.6) 0%, transparent 100%) !important;
  }

  .image-viewer-caption {
    font-size: 14px !important;
    color: white !important;
    text-align: center !important;
    
    margin-bottom: 12px !important;
  }

  .image-viewer-thumbnails {
    display: flex !important;
    justify-content: center !important;
    gap: 8px !important;
    
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
    
    padding: 8px 0 !important;
  }

  .thumbnail-item {
    width: 50px !important;
    height: 50px !important;
    
    border-radius: 8px !important;
    overflow: hidden !important;
    
    opacity: 0.5 !important;
    
    flex-shrink: 0 !important;
    
    transition: var(--chat-transition) !important;
  }

  .thumbnail-item.active {
    opacity: 1 !important;
    border: 2px solid white !important;
  }

  .thumbnail-item img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
  }

  /* -------------------------------------------------
     CONTEXT MENU / ACTION SHEET
     ------------------------------------------------- */
  .context-menu,
  .action-sheet {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    
    z-index: 1350 !important;
    
    display: flex !important;
    align-items: flex-end !important;
    justify-content: center !important;
    
    background: rgba(0, 0, 0, 0.5) !important;
    
    opacity: 0 !important;
    visibility: hidden !important;
    
    transition: var(--chat-transition) !important;
  }

  .context-menu.open,
  .action-sheet.open {
    opacity: 1 !important;
    visibility: visible !important;
  }

  .context-menu-content,
  .action-sheet-content {
    width: 100% !important;
    max-width: 100% !important;
    
    background: var(--surface) !important;
    border-radius: var(--chat-radius-lg) var(--chat-radius-lg) 0 0 !important;
    
    padding-bottom: var(--safe-area-bottom) !important;
    
    transform: translateY(100%) !important;
    
    transition: var(--chat-transition) !important;
  }

  .context-menu.open .context-menu-content,
  .action-sheet.open .action-sheet-content {
    transform: translateY(0) !important;
  }

  /* Handle Bar */
  .sheet-handle {
    width: 36px !important;
    height: 4px !important;
    
    margin: 10px auto !important;
    
    background: var(--line) !important;
    border-radius: 2px !important;
  }

  /* Context Menu Header */
  .context-menu-header,
  .action-sheet-header {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    padding: 12px 20px 16px 20px !important;
    
    border-bottom: 1px solid var(--line) !important;
  }

  .context-menu-preview {
    width: 56px !important;
    height: 56px !important;
    
    border-radius: 12px !important;
    
    object-fit: cover !important;
    
    flex-shrink: 0 !important;
  }

  .context-menu-info {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .context-menu-title {
    font-size: 16px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }

  .context-menu-subtitle {
    font-size: 13px !important;
    color: var(--muted) !important;
    margin-top: 2px !important;
  }

  /* Context Menu Options */
  .context-menu-options,
  .action-sheet-options {
    padding: 8px 0 !important;
  }

  .context-menu-option,
  .action-sheet-option {
    display: flex !important;
    align-items: center !important;
    gap: 14px !important;
    
    width: 100% !important;
    
    padding: 14px 20px !important;
    
    background: none !important;
    border: none !important;
    
    font-size: 16px !important;
    color: var(--text) !important;
    text-align: left !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .context-menu-option:active,
  .action-sheet-option:active {
    background: var(--bg) !important;
  }

  .context-menu-option i,
  .action-sheet-option i {
    width: 24px !important;
    
    font-size: 18px !important;
    color: var(--muted) !important;
    
    text-align: center !important;
  }

  .context-menu-option.danger,
  .action-sheet-option.danger {
    color: #ef4444 !important;
  }

  .context-menu-option.danger i,
  .action-sheet-option.danger i {
    color: #ef4444 !important;
  }

  /* Separator */
  .context-menu-separator,
  .action-sheet-separator {
    height: 8px !important;
    
    background: var(--bg) !important;
    
    margin: 8px 0 !important;
  }

  /* Cancel Button */
  .context-menu-cancel,
  .action-sheet-cancel {
    width: calc(100% - 40px) !important;
    
    margin: 8px 20px 16px 20px !important;
    padding: 14px !important;
    
    background: var(--bg) !important;
    border: none !important;
    border-radius: 12px !important;
    
    font-size: 16px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    
    cursor: pointer !important;
  }

  /* -------------------------------------------------
     CONFIRMATION DIALOG
     ------------------------------------------------- */
  .confirm-dialog,
  .alert-dialog {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    
    z-index: 1400 !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    padding: 20px !important;
    
    background: rgba(0, 0, 0, 0.5) !important;
    
    opacity: 0 !important;
    visibility: hidden !important;
    
    transition: var(--chat-transition) !important;
  }

  .confirm-dialog.open,
  .alert-dialog.open {
    opacity: 1 !important;
    visibility: visible !important;
  }

  .confirm-dialog-content,
  .alert-dialog-content {
    width: 100% !important;
    max-width: 320px !important;
    
    background: var(--surface) !important;
    border-radius: var(--chat-radius) !important;
    
    overflow: hidden !important;
    
    transform: scale(0.9) !important;
    
    transition: var(--chat-transition) !important;
  }

  .confirm-dialog.open .confirm-dialog-content,
  .alert-dialog.open .alert-dialog-content {
    transform: scale(1) !important;
  }

  /* Dialog Icon */
  .dialog-icon {
    display: flex !important;
    justify-content: center !important;
    
    padding: 24px 24px 16px 24px !important;
  }

  .dialog-icon-circle {
    width: 64px !important;
    height: 64px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    border-radius: 50% !important;
    
    font-size: 28px !important;
  }

  .dialog-icon-circle.warning {
    background: rgba(245, 158, 11, 0.15) !important;
    color: #f59e0b !important;
  }

  .dialog-icon-circle.danger {
    background: rgba(239, 68, 68, 0.15) !important;
    color: #ef4444 !important;
  }

  .dialog-icon-circle.success {
    background: rgba(34, 197, 94, 0.15) !important;
    color: #22c55e !important;
  }

  .dialog-icon-circle.info {
    background: rgba(59, 130, 246, 0.15) !important;
    color: #3b82f6 !important;
  }

  /* Dialog Body */
  .dialog-body {
    padding: 0 24px 24px 24px !important;
    
    text-align: center !important;
  }

  .dialog-title {
    font-size: 18px !important;
    font-weight: 700 !important;
    color: var(--text) !important;
    
    margin-bottom: 8px !important;
  }

  .dialog-message {
    font-size: 14px !important;
    line-height: 1.5 !important;
    color: var(--muted) !important;
  }

  /* Dialog Actions */
  .dialog-actions {
    display: flex !important;
    
    border-top: 1px solid var(--line) !important;
  }

  .dialog-btn {
    flex: 1 !important;
    
    padding: 16px !important;
    
    background: none !important;
    border: none !important;
    
    font-size: 16px !important;
    font-weight: 600 !important;
    
    cursor: pointer !important;
    
    transition: var(--chat-transition) !important;
  }

  .dialog-btn:active {
    background: var(--bg) !important;
  }

  .dialog-btn.cancel {
    color: var(--muted) !important;
    border-right: 1px solid var(--line) !important;
  }

  .dialog-btn.confirm {
    color: var(--g-500) !important;
  }

  .dialog-btn.danger {
    color: #ef4444 !important;
  }

  /* Stacked Actions (for 3+ buttons) */
  .dialog-actions.stacked {
    flex-direction: column !important;
  }

  .dialog-actions.stacked .dialog-btn {
    border-right: none !important;
    border-bottom: 1px solid var(--line) !important;
  }

  .dialog-actions.stacked .dialog-btn:last-child {
    border-bottom: none !important;
  }

  /* -------------------------------------------------
     TOOLTIP
     ------------------------------------------------- */
  .tooltip {
    position: absolute !important;
    
    padding: 8px 12px !important;
    
    background: var(--text) !important;
    border-radius: 8px !important;
    
    font-size: 12px !important;
    font-weight: 500 !important;
    color: var(--surface) !important;
    
    white-space: nowrap !important;
    
    opacity: 0 !important;
    visibility: hidden !important;
    
    transform: translateY(4px) !important;
    
    transition: var(--chat-transition) !important;
    
    z-index: 1500 !important;
    
    pointer-events: none !important;
  }

  .tooltip.visible {
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateY(0) !important;
  }

  .tooltip::after {
    content: '' !important;
    
    position: absolute !important;
    bottom: 100% !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    
    border: 6px solid transparent !important;
    border-bottom-color: var(--text) !important;
  }

  /* -------------------------------------------------
     POPOVER
     ------------------------------------------------- */
  .popover {
    position: absolute !important;
    
    min-width: 200px !important;
    max-width: 280px !important;
    
    background: var(--surface) !important;
    border: 1px solid var(--line) !important;
    border-radius: 14px !important;
    
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15) !important;
    
    opacity: 0 !important;
    visibility: hidden !important;
    
    transform: scale(0.95) translateY(-10px) !important;
    transform-origin: top center !important;
    
    transition: var(--chat-transition) !important;
    
    z-index: 1350 !important;
  }

  .popover.visible {
    opacity: 1 !important;
    visibility: visible !important;
    transform: scale(1) translateY(0) !important;
  }

  .popover-header {
    padding: 14px 16px !important;
    
    border-bottom: 1px solid var(--line) !important;
  }

  .popover-title {
    font-size: 15px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
  }

  .popover-body {
    padding: 12px 16px !important;
  }

  .popover-item {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    padding: 10px 0 !important;
    
    font-size: 14px !important;
    color: var(--text) !important;
    
    cursor: pointer !important;
  }

  .popover-item i {
    width: 20px !important;
    color: var(--muted) !important;
    text-align: center !important;
  }

  /* -------------------------------------------------
     OVERLAY BACKDROP
     ------------------------------------------------- */
  .modal-backdrop {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    
    background: rgba(0, 0, 0, 0.5) !important;
    
    opacity: 0 !important;
    visibility: hidden !important;
    
    transition: var(--chat-transition) !important;
    
    z-index: 1200 !important;
  }

  .modal-backdrop.visible {
    opacity: 1 !important;
    visibility: visible !important;
  }

  /* -------------------------------------------------
     FORWARD MESSAGE MODAL
     ------------------------------------------------- */
  .forward-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    
    z-index: 1300 !important;
    
    display: flex !important;
    align-items: flex-end !important;
    justify-content: center !important;
    
    background: rgba(0, 0, 0, 0.5) !important;
    
    opacity: 0 !important;
    visibility: hidden !important;
    
    transition: var(--chat-transition) !important;
  }

  .forward-modal.open {
    opacity: 1 !important;
    visibility: visible !important;
  }

  .forward-modal-content {
    width: 100% !important;
    max-height: 80vh !important;
    
    background: var(--surface) !important;
    border-radius: var(--chat-radius-lg) var(--chat-radius-lg) 0 0 !important;
    
    display: flex !important;
    flex-direction: column !important;
    
    transform: translateY(100%) !important;
    
    transition: var(--chat-transition) !important;
  }

  .forward-modal.open .forward-modal-content {
    transform: translateY(0) !important;
  }

  .forward-modal-header {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    
    padding: 16px 20px !important;
    
    border-bottom: 1px solid var(--line) !important;
    
    flex-shrink: 0 !important;
  }

  .forward-modal-title {
    font-size: 17px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
  }

  .forward-modal-close {
    width: 36px !important;
    height: 36px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--bg) !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: var(--muted) !important;
    font-size: 18px !important;
    
    cursor: pointer !important;
  }

  /* Forward Message Preview */
  .forward-message-preview {
    display: flex !important;
    gap: 12px !important;
    
    padding: 12px 20px !important;
    
    background: var(--bg) !important;
    border-bottom: 1px solid var(--line) !important;
  }

  .forward-message-preview-icon {
    width: 40px !important;
    height: 40px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--surface) !important;
    border-radius: 10px !important;
    
    color: var(--g-500) !important;
    font-size: 18px !important;
    
    flex-shrink: 0 !important;
  }

  .forward-message-text {
    flex: 1 !important;
    
    font-size: 14px !important;
    color: var(--text) !important;
    
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
  }

  /* Forward Search */
  .forward-search {
    padding: 12px 20px !important;
    
    border-bottom: 1px solid var(--line) !important;
  }

  .forward-search-input {
    width: 100% !important;
    
    padding: 12px 16px !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 12px !important;
    
    font-size: 15px !important;
    color: var(--text) !important;
  }

  /* Forward Recipients */
  .forward-recipients {
    flex: 1 !important;
    
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
  }

  .forward-recipient-item {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    padding: 12px 20px !important;
    
    cursor: pointer !important;
  }

  .forward-recipient-item:active {
    background: var(--bg) !important;
  }

  .forward-recipient-item.selected {
    background: rgba(var(--g-500-rgb), 0.08) !important;
  }

  .forward-recipient-avatar {
    width: 44px !important;
    height: 44px !important;
    
    border-radius: 50% !important;
    
    object-fit: cover !important;
  }

  .forward-recipient-name {
    flex: 1 !important;
    
    font-size: 15px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
  }

  .forward-recipient-check {
    width: 24px !important;
    height: 24px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    border: 2px solid var(--line) !important;
    border-radius: 50% !important;
    
    transition: var(--chat-transition) !important;
  }

  .forward-recipient-item.selected .forward-recipient-check {
    background: var(--g-500) !important;
    border-color: var(--g-500) !important;
    color: white !important;
  }

  /* Forward Footer */
  .forward-modal-footer {
    padding: 16px 20px !important;
    padding-bottom: calc(16px + var(--safe-area-bottom)) !important;
    
    border-top: 1px solid var(--line) !important;
    
    flex-shrink: 0 !important;
  }

  .forward-send-btn {
    width: 100% !important;
    height: 50px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 10px !important;
    
    background: linear-gradient(135deg, var(--g-500), var(--g-600)) !important;
    border: none !important;
    border-radius: 14px !important;
    
    font-size: 16px !important;
    font-weight: 600 !important;
    color: white !important;
    
    cursor: pointer !important;
  }

  .forward-send-btn:disabled {
    opacity: 0.5 !important;
  }

  /* =====================================================
     BACK BUTTON FIX - ENSURE VISIBILITY & CLICKABILITY
     ===================================================== */
  
  /* Force show back button with mobile-only class on mobile */
  .back-btn.mobile-only {
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    
    pointer-events: auto !important;
    
    position: relative !important;
    z-index: 10 !important;
  }

  /* Enhanced Back Button Styling for Mobile */
  .back-btn {
    width: var(--chat-touch-target) !important;
    height: var(--chat-touch-target) !important;
    min-width: var(--chat-touch-target) !important;
    min-height: var(--chat-touch-target) !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--surface) !important;
    border: 1px solid var(--line) !important;
    border-radius: var(--chat-radius-sm) !important;
    
    color: var(--text) !important;
    font-size: 20px !important;
    
    cursor: pointer !important;
    flex-shrink: 0 !important;
    
    pointer-events: auto !important;
    
    -webkit-tap-highlight-color: transparent !important;
    touch-action: manipulation !important;
    
    transition: all 0.15s ease !important;
  }

  .back-btn i {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    font-size: 20px !important;
    pointer-events: none !important;
  }

  .back-btn:active {
    background: var(--bg) !important;
    transform: scale(0.92) !important;
    border-color: var(--g-400) !important;
  }

  /* Circulars Header Back Button */
  .circulars-header-left .back-btn {
    margin-right: 8px !important;
  }

  /* Chat Header Back Button */
  .chat-header .back-btn {
    margin-right: 4px !important;
  }

  /* =====================================================
     PHASE 9: STATES & FEEDBACK
     =====================================================
     Empty states, loading states, skeleton screens,
     error states, toast notifications, progress indicators
     ===================================================== */

  /* -------------------------------------------------
     EMPTY STATES
     ------------------------------------------------- */
  .empty-state,
  .no-conversations,
  .no-messages,
  .no-results,
  .empty-chat {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    
    padding: 40px 24px !important;
    
    text-align: center !important;
    
    min-height: 300px !important;
  }

  .empty-state-icon {
    width: 80px !important;
    height: 80px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: linear-gradient(135deg, var(--bg), rgba(var(--g-500-rgb), 0.08)) !important;
    border-radius: 24px !important;
    
    margin-bottom: 20px !important;
  }

  .empty-state-icon i {
    font-size: 36px !important;
    color: var(--g-500) !important;
  }

  .empty-state-title {
    font-size: 18px !important;
    font-weight: 700 !important;
    color: var(--text) !important;
    
    margin-bottom: 8px !important;
  }

  .empty-state-text {
    font-size: 14px !important;
    line-height: 1.5 !important;
    color: var(--muted) !important;
    
    max-width: 280px !important;
    
    margin-bottom: 20px !important;
  }

  .empty-state-btn {
    display: inline-flex !important;
    align-items: center !important;
    gap: 8px !important;
    
    padding: 12px 24px !important;
    
    background: linear-gradient(135deg, var(--g-500), var(--g-600)) !important;
    border: none !important;
    border-radius: 12px !important;
    
    font-size: 14px !important;
    font-weight: 600 !important;
    color: white !important;
    
    cursor: pointer !important;
  }

  /* No Chat Selected */
  .no-chat-selected {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    
    height: 100% !important;
    padding: 40px !important;
    
    text-align: center !important;
    
    background: var(--bg) !important;
  }

  .no-chat-icon {
    width: 100px !important;
    height: 100px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--surface) !important;
    border-radius: 50% !important;
    
    margin-bottom: 24px !important;
    
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08) !important;
  }

  .no-chat-icon i {
    font-size: 44px !important;
    color: var(--g-500) !important;
  }

  .no-chat-title {
    font-size: 20px !important;
    font-weight: 700 !important;
    color: var(--text) !important;
    
    margin-bottom: 8px !important;
  }

  .no-chat-text {
    font-size: 14px !important;
    color: var(--muted) !important;
    
    max-width: 280px !important;
  }

  /* -------------------------------------------------
     LOADING STATES
     ------------------------------------------------- */
  .loading-state,
  .loading-container {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    
    padding: 40px 20px !important;
    
    min-height: 200px !important;
  }

  .loading-spinner {
    width: 40px !important;
    height: 40px !important;
    
    border: 3px solid var(--line) !important;
    border-top-color: var(--g-500) !important;
    border-radius: 50% !important;
    
    animation: spin 0.8s linear infinite !important;
    
    margin-bottom: 16px !important;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  .loading-text {
    font-size: 14px !important;
    color: var(--muted) !important;
  }

  /* Inline Loader */
  .inline-loader {
    display: inline-flex !important;
    align-items: center !important;
    gap: 8px !important;
    
    font-size: 13px !important;
    color: var(--muted) !important;
  }

  .inline-loader-dot {
    width: 6px !important;
    height: 6px !important;
    
    background: var(--g-500) !important;
    border-radius: 50% !important;
    
    animation: pulse-dot 1.4s infinite ease-in-out both !important;
  }

  .inline-loader-dot:nth-child(1) {
    animation-delay: -0.32s !important;
  }

  .inline-loader-dot:nth-child(2) {
    animation-delay: -0.16s !important;
  }

  @keyframes pulse-dot {
    0%, 80%, 100% {
      transform: scale(0.6);
      opacity: 0.5;
    }
    40% {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Page Loader */
  .page-loader {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: var(--surface) !important;
    
    z-index: 9999 !important;
  }

  .page-loader-content {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    gap: 20px !important;
  }

  .page-loader-logo {
    width: 60px !important;
    height: 60px !important;
    
    animation: pulse 1.5s ease-in-out infinite !important;
  }

  @keyframes pulse {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.05); opacity: 0.8; }
  }

  /* -------------------------------------------------
     SKELETON SCREENS
     ------------------------------------------------- */
  .skeleton {
    background: linear-gradient(
      90deg,
      var(--bg) 25%,
      rgba(var(--g-500-rgb), 0.08) 50%,
      var(--bg) 75%
    ) !important;
    background-size: 200% 100% !important;
    
    animation: skeleton-shimmer 1.5s infinite !important;
    
    border-radius: 8px !important;
  }

  @keyframes skeleton-shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  /* Conversation Skeleton */
  .conversation-skeleton {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    padding: 14px 16px !important;
  }

  .skeleton-avatar {
    width: 52px !important;
    height: 52px !important;
    
    border-radius: 50% !important;
    
    flex-shrink: 0 !important;
  }

  .skeleton-content {
    flex: 1 !important;
  }

  .skeleton-line {
    height: 14px !important;
    
    border-radius: 7px !important;
    
    margin-bottom: 8px !important;
  }

  .skeleton-line:last-child {
    margin-bottom: 0 !important;
  }

  .skeleton-line.short {
    width: 60% !important;
  }

  .skeleton-line.medium {
    width: 80% !important;
  }

  .skeleton-line.full {
    width: 100% !important;
  }

  /* Message Skeleton */
  .message-skeleton {
    display: flex !important;
    gap: 10px !important;
    
    padding: 8px 16px !important;
    
    max-width: 75% !important;
  }

  .message-skeleton.own {
    flex-direction: row-reverse !important;
    margin-left: auto !important;
  }

  .message-skeleton-bubble {
    padding: 14px !important;
    
    border-radius: var(--chat-radius) !important;
  }

  .message-skeleton-bubble .skeleton-line {
    height: 12px !important;
  }

  /* Feed Post Skeleton */
  .post-skeleton {
    background: var(--surface) !important;
    border-radius: var(--chat-radius) !important;
    
    padding: 16px !important;
    margin-bottom: 16px !important;
  }

  .post-skeleton-header {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    margin-bottom: 14px !important;
  }

  .post-skeleton-avatar {
    width: 44px !important;
    height: 44px !important;
    
    border-radius: 50% !important;
  }

  .post-skeleton-meta {
    flex: 1 !important;
  }

  .post-skeleton-content {
    margin-bottom: 14px !important;
  }

  .post-skeleton-image {
    height: 200px !important;
    
    border-radius: 12px !important;
    
    margin-bottom: 14px !important;
  }

  .post-skeleton-actions {
    display: flex !important;
    gap: 16px !important;
  }

  .post-skeleton-action {
    width: 60px !important;
    height: 32px !important;
    
    border-radius: 8px !important;
  }

  /* -------------------------------------------------
     ERROR STATES
     ------------------------------------------------- */
  .error-state {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    
    padding: 40px 24px !important;
    
    text-align: center !important;
  }

  .error-state-icon {
    width: 70px !important;
    height: 70px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: rgba(239, 68, 68, 0.1) !important;
    border-radius: 50% !important;
    
    margin-bottom: 20px !important;
  }

  .error-state-icon i {
    font-size: 32px !important;
    color: #ef4444 !important;
  }

  .error-state-title {
    font-size: 18px !important;
    font-weight: 700 !important;
    color: var(--text) !important;
    
    margin-bottom: 8px !important;
  }

  .error-state-text {
    font-size: 14px !important;
    line-height: 1.5 !important;
    color: var(--muted) !important;
    
    max-width: 280px !important;
    
    margin-bottom: 20px !important;
  }

  .error-retry-btn {
    display: inline-flex !important;
    align-items: center !important;
    gap: 8px !important;
    
    padding: 12px 24px !important;
    
    background: var(--bg) !important;
    border: 1px solid var(--line) !important;
    border-radius: 12px !important;
    
    font-size: 14px !important;
    font-weight: 600 !important;
    color: var(--text) !important;
    
    cursor: pointer !important;
  }

  /* Inline Error */
  .inline-error {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    
    padding: 12px 16px !important;
    
    background: rgba(239, 68, 68, 0.08) !important;
    border: 1px solid rgba(239, 68, 68, 0.2) !important;
    border-radius: 10px !important;
    
    font-size: 13px !important;
    color: #ef4444 !important;
  }

  .inline-error i {
    font-size: 16px !important;
  }

  /* Connection Error Banner */
  .connection-error {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 10px !important;
    
    padding: 12px 16px !important;
    
    background: #fef2f2 !important;
    border-bottom: 1px solid #fecaca !important;
    
    font-size: 13px !important;
    color: #dc2626 !important;
  }

  [data-theme="dark"] .connection-error {
    background: rgba(239, 68, 68, 0.12) !important;
    border-color: rgba(239, 68, 68, 0.25) !important;
  }

  .connection-error i {
    font-size: 18px !important;
  }

  .connection-error-retry {
    padding: 6px 12px !important;
    
    background: #dc2626 !important;
    border: none !important;
    border-radius: 6px !important;
    
    font-size: 12px !important;
    font-weight: 600 !important;
    color: white !important;
    
    cursor: pointer !important;
  }

  /* -------------------------------------------------
     TOAST NOTIFICATIONS
     ------------------------------------------------- */
  .toast-container {
    position: fixed !important;
    bottom: calc(var(--dashboard-nav-height, 70px) + 16px + var(--safe-area-bottom)) !important;
    left: 16px !important;
    right: 16px !important;
    
    display: flex !important;
    flex-direction: column !important;
    gap: 10px !important;
    
    z-index: 9000 !important;
    
    pointer-events: none !important;
  }

  .toast {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    padding: 14px 16px !important;
    
    background: var(--text) !important;
    border-radius: 14px !important;
    
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2) !important;
    
    pointer-events: auto !important;
    
    transform: translateY(100px) !important;
    opacity: 0 !important;
    
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  }

  .toast.visible {
    transform: translateY(0) !important;
    opacity: 1 !important;
  }

  .toast-icon {
    width: 28px !important;
    height: 28px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    border-radius: 50% !important;
    
    font-size: 14px !important;
    
    flex-shrink: 0 !important;
  }

  .toast.success .toast-icon {
    background: rgba(34, 197, 94, 0.2) !important;
    color: #22c55e !important;
  }

  .toast.error .toast-icon {
    background: rgba(239, 68, 68, 0.2) !important;
    color: #ef4444 !important;
  }

  .toast.warning .toast-icon {
    background: rgba(245, 158, 11, 0.2) !important;
    color: #f59e0b !important;
  }

  .toast.info .toast-icon {
    background: rgba(59, 130, 246, 0.2) !important;
    color: #3b82f6 !important;
  }

  .toast-content {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .toast-title {
    font-size: 14px !important;
    font-weight: 600 !important;
    color: var(--surface) !important;
  }

  .toast-message {
    font-size: 13px !important;
    color: rgba(255, 255, 255, 0.75) !important;
    
    margin-top: 2px !important;
  }

  .toast-close {
    width: 28px !important;
    height: 28px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: rgba(255, 255, 255, 0.1) !important;
    border: none !important;
    border-radius: 50% !important;
    
    color: rgba(255, 255, 255, 0.7) !important;
    font-size: 14px !important;
    
    cursor: pointer !important;
    
    flex-shrink: 0 !important;
  }

  .toast-progress {
    position: absolute !important;
    bottom: 0 !important;
    left: 0 !important;
    
    height: 3px !important;
    
    background: rgba(255, 255, 255, 0.3) !important;
    border-radius: 0 0 14px 14px !important;
    
    animation: toast-progress 4s linear forwards !important;
  }

  @keyframes toast-progress {
    from { width: 100%; }
    to { width: 0%; }
  }

  /* -------------------------------------------------
     PROGRESS INDICATORS
     ------------------------------------------------- */
  .progress-bar {
    height: 6px !important;
    
    background: var(--bg) !important;
    border-radius: 3px !important;
    
    overflow: hidden !important;
  }

  .progress-fill {
    height: 100% !important;
    
    background: linear-gradient(90deg, var(--g-500), var(--g-400)) !important;
    border-radius: 3px !important;
    
    transition: width 0.3s ease !important;
  }

  /* Circular Progress */
  .circular-progress {
    position: relative !important;
    
    width: 48px !important;
    height: 48px !important;
  }

  .circular-progress svg {
    transform: rotate(-90deg) !important;
  }

  .circular-progress-bg {
    fill: none !important;
    stroke: var(--bg) !important;
    stroke-width: 4 !important;
  }

  .circular-progress-fill {
    fill: none !important;
    stroke: var(--g-500) !important;
    stroke-width: 4 !important;
    stroke-linecap: round !important;
    
    transition: stroke-dashoffset 0.3s ease !important;
  }

  .circular-progress-text {
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    
    font-size: 11px !important;
    font-weight: 700 !important;
    color: var(--text) !important;
  }

  /* Upload Progress */
  .upload-progress {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    
    padding: 12px 16px !important;
    
    background: var(--bg) !important;
    border-radius: 12px !important;
  }

  .upload-progress-icon {
    width: 40px !important;
    height: 40px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    background: rgba(var(--g-500-rgb), 0.1) !important;
    border-radius: 10px !important;
    
    color: var(--g-500) !important;
    font-size: 18px !important;
  }

  .upload-progress-info {
    flex: 1 !important;
    min-width: 0 !important;
  }

  .upload-progress-name {
    font-size: 14px !important;
    font-weight: 500 !important;
    color: var(--text) !important;
    
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }

  .upload-progress-bar {
    height: 4px !important;
    
    background: var(--line) !important;
    border-radius: 2px !important;
    
    margin-top: 8px !important;
    
    overflow: hidden !important;
  }

  .upload-progress-bar-fill {
    height: 100% !important;
    
    background: var(--g-500) !important;
    border-radius: 2px !important;
    
    transition: width 0.2s ease !important;
  }

  .upload-progress-percent {
    font-size: 13px !important;
    font-weight: 600 !important;
    color: var(--g-500) !important;
    
    min-width: 40px !important;
    text-align: right !important;
  }

  /* -------------------------------------------------
     SNACKBAR
     ------------------------------------------------- */
  .snackbar {
    position: fixed !important;
    bottom: calc(var(--dashboard-nav-height, 70px) + 16px + var(--safe-area-bottom)) !important;
    left: 16px !important;
    right: 16px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    gap: 12px !important;
    
    padding: 14px 16px !important;
    
    background: #323232 !important;
    border-radius: 10px !important;
    
    z-index: 8500 !important;
    
    transform: translateY(100px) !important;
    opacity: 0 !important;
    
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  }

  .snackbar.visible {
    transform: translateY(0) !important;
    opacity: 1 !important;
  }

  .snackbar-text {
    font-size: 14px !important;
    color: white !important;
    
    flex: 1 !important;
  }

  .snackbar-action {
    padding: 6px 12px !important;
    
    background: none !important;
    border: none !important;
    
    font-size: 14px !important;
    font-weight: 600 !important;
    color: var(--g-400) !important;
    text-transform: uppercase !important;
    
    cursor: pointer !important;
    
    flex-shrink: 0 !important;
  }

  /* -------------------------------------------------
     BADGE NOTIFICATIONS
     ------------------------------------------------- */
  .notification-badge {
    position: absolute !important;
    top: -4px !important;
    right: -4px !important;
    
    min-width: 18px !important;
    height: 18px !important;
    
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    padding: 0 5px !important;
    
    background: #ef4444 !important;
    border: 2px solid var(--surface) !important;
    border-radius: 10px !important;
    
    font-size: 10px !important;
    font-weight: 700 !important;
    color: white !important;
  }

  .notification-badge.large {
    min-width: 22px !important;
    height: 22px !important;
    
    font-size: 11px !important;
  }

  .notification-dot {
    position: absolute !important;
    top: 0 !important;
    right: 0 !important;
    
    width: 10px !important;
    height: 10px !important;
    
    background: #ef4444 !important;
    border: 2px solid var(--surface) !important;
    border-radius: 50% !important;
  }

  .notification-dot.pulse {
    animation: notification-pulse 2s infinite !important;
  }

  @keyframes notification-pulse {
    0% {
      box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.5);
    }
    70% {
      box-shadow: 0 0 0 8px rgba(239, 68, 68, 0);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
    }
  }

  /* =====================================================
     PHASE 10: POLISH & ACCESSIBILITY
     =====================================================
     Touch feedback, focus states, reduced motion,
     480px small phone breakpoint, landscape optimizations,
     high contrast, print styles
     ===================================================== */

  /* -------------------------------------------------
     TOUCH FEEDBACK & RIPPLE EFFECTS
     ------------------------------------------------- */
  .touch-feedback {
    position: relative !important;
    overflow: hidden !important;
    
    -webkit-tap-highlight-color: transparent !important;
  }

  .touch-feedback::after {
    content: '' !important;
    
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    
    width: 0 !important;
    height: 0 !important;
    
    background: rgba(var(--g-500-rgb), 0.15) !important;
    border-radius: 50% !important;
    
    transform: translate(-50%, -50%) !important;
    
    opacity: 0 !important;
    
    transition: width 0.4s ease, height 0.4s ease, opacity 0.4s ease !important;
    
    pointer-events: none !important;
  }

  .touch-feedback:active::after {
    width: 200px !important;
    height: 200px !important;
    
    opacity: 1 !important;
    
    transition: width 0s, height 0s, opacity 0s !important;
  }

  /* Button Press Effect */
  button:active,
  .btn:active,
  [role="button"]:active {
    transform: scale(0.97) !important;
  }

  /* Interactive Item Press */
  .conversation-item:active,
  .message-bubble:active,
  .feed-post:active,
  .list-item:active {
    background: var(--bg) !important;
  }

  /* -------------------------------------------------
     FOCUS STATES (Accessibility)
     ------------------------------------------------- */
  /* Visible focus for keyboard navigation */
  *:focus-visible {
    outline: 2px solid var(--g-500) !important;
    outline-offset: 2px !important;
  }

  /* Remove outline for mouse users */
  *:focus:not(:focus-visible) {
    outline: none !important;
  }

  /* Enhanced focus for important interactive elements */
  button:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible,
  a:focus-visible {
    outline: 2px solid var(--g-500) !important;
    outline-offset: 2px !important;
    
    box-shadow: 0 0 0 4px rgba(var(--g-500-rgb), 0.2) !important;
  }

  /* Skip to content link (screen readers) */
  .skip-link {
    position: absolute !important;
    top: -100px !important;
    left: 16px !important;
    
    padding: 12px 20px !important;
    
    background: var(--g-500) !important;
    border-radius: 8px !important;
    
    color: white !important;
    font-weight: 600 !important;
    text-decoration: none !important;
    
    z-index: 10000 !important;
    
    transition: top 0.2s ease !important;
  }

  .skip-link:focus {
    top: 16px !important;
  }

  /* -------------------------------------------------
     REDUCED MOTION (Accessibility)
     ------------------------------------------------- */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }

    .chat-sidebar {
      transition: none !important;
    }

    .sidebar-backdrop {
      transition: none !important;
    }

    .modal,
    .action-sheet,
    .toast,
    .snackbar {
      transition: none !important;
    }

    .skeleton {
      animation: none !important;
      background: var(--bg) !important;
    }

    .loading-spinner {
      animation: none !important;
      border-top-color: var(--g-500) !important;
    }

    .typing-indicator span {
      animation: none !important;
    }
  }

  /* -------------------------------------------------
     HIGH CONTRAST MODE
     ------------------------------------------------- */
  @media (prefers-contrast: high) {
    .message-bubble {
      border: 2px solid currentColor !important;
    }

    .conversation-item {
      border: 1px solid var(--line) !important;
    }

    button,
    .btn {
      border: 2px solid currentColor !important;
    }

    .chat-input {
      border: 2px solid var(--text) !important;
    }

    .unread-badge {
      border: 2px solid white !important;
    }
  }

  /* -------------------------------------------------
     SCREEN READER ONLY (Utility)
     ------------------------------------------------- */
  .sr-only {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
  }

  .sr-only-focusable:focus {
    position: static !important;
    width: auto !important;
    height: auto !important;
    padding: inherit !important;
    margin: inherit !important;
    overflow: visible !important;
    clip: auto !important;
    white-space: normal !important;
  }

  /* -------------------------------------------------
     ARIA LIVE REGIONS
     ------------------------------------------------- */
  [aria-live] {
    position: relative !important;
  }

  .aria-announce {
    position: absolute !important;
    left: -9999px !important;
    width: 1px !important;
    height: 1px !important;
    overflow: hidden !important;
  }

  /* -------------------------------------------------
     SELECTION STYLES
     ------------------------------------------------- */
  ::selection {
    background: rgba(var(--g-500-rgb), 0.25) !important;
    color: var(--text) !important;
  }

  ::-moz-selection {
    background: rgba(var(--g-500-rgb), 0.25) !important;
    color: var(--text) !important;
  }

  /* -------------------------------------------------
     SCROLLBAR STYLING
     ------------------------------------------------- */
  ::-webkit-scrollbar {
    width: 4px !important;
    height: 4px !important;
  }

  ::-webkit-scrollbar-track {
    background: transparent !important;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--line) !important;
    border-radius: 4px !important;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--muted) !important;
  }

  /* Hide scrollbar on touch devices */
  .messages-container::-webkit-scrollbar,
  .conversations-list::-webkit-scrollbar,
  .feed-container::-webkit-scrollbar {
    width: 0 !important;
    display: none !important;
  }

  .messages-container,
  .conversations-list,
  .feed-container {
    -ms-overflow-style: none !important;
    scrollbar-width: none !important;
  }

  /* -------------------------------------------------
     MOMENTUM SCROLLING
     ------------------------------------------------- */
  .messages-container,
  .conversations-list,
  .feed-container,
  .modal-content,
  .action-sheet-content {
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior: contain !important;
  }

  /* -------------------------------------------------
     TEXT RENDERING
     ------------------------------------------------- */
  body {
    -webkit-font-smoothing: antialiased !important;
    -moz-osx-font-smoothing: grayscale !important;
    text-rendering: optimizeLegibility !important;
  }

  /* Prevent text size adjustment */
  html {
    -webkit-text-size-adjust: 100% !important;
    -ms-text-size-adjust: 100% !important;
  }

  /* -------------------------------------------------
     SAFE AREA UTILITIES
     ------------------------------------------------- */
  .safe-area-top {
    padding-top: var(--safe-area-top) !important;
  }

  .safe-area-bottom {
    padding-bottom: var(--safe-area-bottom) !important;
  }

  .safe-area-left {
    padding-left: var(--safe-area-left) !important;
  }

  .safe-area-right {
    padding-right: var(--safe-area-right) !important;
  }

  /* -------------------------------------------------
     POINTER CURSOR UTILITIES
     ------------------------------------------------- */
  .clickable,
  [role="button"],
  [tabindex="0"] {
    cursor: pointer !important;
  }

  .not-allowed {
    cursor: not-allowed !important;
    pointer-events: none !important;
    opacity: 0.5 !important;
  }

} /* End 768px breakpoint */


/* =========================================================
   EXTRA SMALL DEVICES (480px and below)
   =========================================================
   Compact layouts for smaller phones
   ========================================================= */

@media screen and (max-width: 480px) {
  
  /* Reduce header size */
  .chat-mobile-header,
  .chat-header {
    height: 52px !important;
    padding: 0 12px !important;
  }

  /* Smaller avatar in header */
  .chat-header .chat-avatar {
    width: 36px !important;
    height: 36px !important;
  }

  /* Compact chat info */
  .chat-info h3 {
    font-size: 15px !important;
  }

  .chat-info p {
    font-size: 11px !important;
  }

  /* Smaller back button */
  .back-btn {
    width: 38px !important;
    height: 38px !important;
    min-width: 38px !important;
    min-height: 38px !important;
    font-size: 18px !important;
  }

  /* Compact tabs */
  .chat-tabs {
    height: 44px !important;
  }

  .chat-tab {
    font-size: 12px !important;
    padding: 10px 8px !important;
  }

  .chat-tab i {
    font-size: 16px !important;
  }

  /* Smaller conversation items */
  .conversation-item {
    padding: 12px !important;
    gap: 10px !important;
  }

  .conversation-avatar {
    width: 46px !important;
    height: 46px !important;
  }

  .conversation-name {
    font-size: 14px !important;
  }

  .conversation-preview {
    font-size: 12px !important;
  }

  /* Compact messages */
  .message-bubble {
    padding: 10px 12px !important;
    max-width: 85% !important;
  }

  .message-text {
    font-size: 14px !important;
  }

  .message-time {
    font-size: 10px !important;
  }

  /* Smaller input area */
  .message-input-container {
    padding: 8px 10px !important;
  }

  .chat-input-wrapper {
    padding: 8px 12px !important;
  }

  .chat-input {
    font-size: 14px !important;
    min-height: 36px !important;
  }

  .send-btn {
    width: 38px !important;
    height: 38px !important;
    font-size: 16px !important;
  }

  /* Compact feed posts */
  .feed-post {
    padding: 14px !important;
    border-radius: 14px !important;
  }

  .feed-post-header {
    margin-bottom: 10px !important;
  }

  .feed-post-avatar {
    width: 38px !important;
    height: 38px !important;
  }

  .feed-post-author {
    font-size: 14px !important;
  }

  .feed-post-time {
    font-size: 11px !important;
  }

  .feed-post-content {
    font-size: 14px !important;
  }

  /* Smaller action buttons */
  .feed-action-btn {
    padding: 8px 10px !important;
    font-size: 12px !important;
  }

  .feed-action-btn i {
    font-size: 16px !important;
  }

  /* Compact modals */
  .modal-header {
    padding: 14px 16px !important;
  }

  .modal-title {
    font-size: 16px !important;
  }

  .modal-body {
    padding: 16px !important;
  }

  /* Smaller document cards */
  .doc-card {
    padding: 12px !important;
  }

  .doc-icon {
    width: 40px !important;
    height: 40px !important;
    font-size: 18px !important;
  }

  .doc-name {
    font-size: 13px !important;
  }

  /* Compact toasts */
  .toast {
    padding: 12px 14px !important;
  }

  .toast-icon {
    width: 24px !important;
    height: 24px !important;
    font-size: 12px !important;
  }

  .toast-title {
    font-size: 13px !important;
  }

  .toast-message {
    font-size: 12px !important;
  }

  /* Smaller empty states */
  .empty-state-icon {
    width: 70px !important;
    height: 70px !important;
  }

  .empty-state-icon i {
    font-size: 30px !important;
  }

  .empty-state-title {
    font-size: 16px !important;
  }

  .empty-state-text {
    font-size: 13px !important;
  }

  /* Adjust circulars header */
  .circulars-header-info {
    gap: 10px !important;
  }

  .circulars-icon {
    width: 36px !important;
    height: 36px !important;
  }

  .circulars-title h3 {
    font-size: 16px !important;
  }

  .circulars-title p {
    font-size: 11px !important;
  }

  /* Smaller view toggle */
  .circulars-view-toggle {
    padding: 3px !important;
  }

  .view-toggle-btn {
    padding: 8px 12px !important;
    font-size: 12px !important;
  }

  .view-toggle-btn i {
    font-size: 14px !important;
  }

  .view-toggle-btn span {
    display: none !important;
  }

  /* Compact group info */
  .group-details-avatar {
    width: 80px !important;
    height: 80px !important;
  }

  .group-details-name {
    font-size: 20px !important;
  }

  /* Smaller profile modal */
  .profile-avatar-large {
    width: 100px !important;
    height: 100px !important;
  }

  .profile-name-large {
    font-size: 20px !important;
  }

  .profile-quick-btn-icon {
    width: 44px !important;
    height: 44px !important;
    font-size: 18px !important;
  }

}


/* =========================================================
   LANDSCAPE ORIENTATION
   =========================================================
   Optimizations for landscape mode on mobile
   ========================================================= */

@media screen and (max-width: 768px) and (orientation: landscape) {
  
  /* Reduce header height in landscape */
  .chat-mobile-header,
  .chat-header {
    height: 48px !important;
    padding: 0 16px !important;
  }

  /* Hide dashboard header spacing in landscape */
  .chat-interface-wrapper {
    top: 50px !important;
  }

  /* Smaller navigation in landscape */
  .chat-interface-wrapper {
    bottom: 56px !important;
  }

  /* Compact tabs */
  .chat-tabs {
    height: 40px !important;
  }

  .chat-tab {
    padding: 8px 12px !important;
  }

  /* Two-column layout for conversations in landscape */
  .conversations-list {
    display: grid !important;
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 8px !important;
    padding: 8px !important;
  }

  .conversation-item {
    padding: 10px 12px !important;
    border-radius: 12px !important;
    border: 1px solid var(--line) !important;
  }

  /* Smaller avatars in landscape */
  .chat-avatar {
    width: 36px !important;
    height: 36px !important;
  }

  .conversation-avatar {
    width: 44px !important;
    height: 44px !important;
  }

  /* Compact message input */
  .message-input-container {
    padding: 6px 12px !important;
  }

  .chat-input {
    min-height: 36px !important;
    max-height: 80px !important;
  }

  /* Smaller messages */
  .message-bubble {
    padding: 10px 12px !important;
    max-width: 60% !important;
  }

  /* Two-column feed layout */
  .circulars-feed {
    display: grid !important;
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 12px !important;
    padding: 12px !important;
  }

  .feed-post {
    padding: 12px !important;
  }

  /* Compact modals */
  .modal-content {
    max-height: 90vh !important;
  }

  .action-sheet-content {
    max-height: 70vh !important;
  }

  /* Side-by-side dialog actions */
  .dialog-actions {
    flex-direction: row !important;
  }

  .dialog-actions .dialog-btn {
    border-bottom: none !important;
    border-right: 1px solid var(--line) !important;
  }

  .dialog-actions .dialog-btn:last-child {
    border-right: none !important;
  }

  /* Horizontal scroll for image galleries */
  .post-image-grid {
    display: flex !important;
    overflow-x: auto !important;
    gap: 8px !important;
    
    -webkit-overflow-scrolling: touch !important;
    scroll-snap-type: x mandatory !important;
  }

  .post-image-grid .post-image {
    flex-shrink: 0 !important;
    width: 200px !important;
    height: 150px !important;
    
    scroll-snap-align: start !important;
  }

  /* Toast at top in landscape */
  .toast-container {
    top: 60px !important;
    bottom: auto !important;
  }

  /* Smaller empty states */
  .empty-state {
    min-height: 200px !important;
    padding: 20px !important;
  }

  .empty-state-icon {
    width: 60px !important;
    height: 60px !important;
  }

  .no-chat-icon {
    width: 70px !important;
    height: 70px !important;
  }

}


/* =========================================================
   LARGE PHONES (576px - 768px)
   =========================================================
   Slightly larger touch targets and spacing
   ========================================================= */

@media screen and (min-width: 576px) and (max-width: 768px) {
  
  /* Slightly larger header */
  .chat-mobile-header,
  .chat-header {
    height: 60px !important;
  }

  /* Larger sidebar width */
  .chat-sidebar {
    width: 85% !important;
    max-width: 380px !important;
  }

  /* Bigger conversation items */
  .conversation-item {
    padding: 16px 18px !important;
  }

  .conversation-avatar {
    width: 56px !important;
    height: 56px !important;
  }

  /* Larger input area */
  .message-input-container {
    padding: 14px 18px !important;
  }

  .chat-input {
    min-height: 46px !important;
    font-size: 16px !important;
  }

  /* Bigger send button */
  .send-btn {
    width: 48px !important;
    height: 48px !important;
  }

  /* Larger message bubbles */
  .message-bubble {
    padding: 14px 18px !important;
    max-width: 75% !important;
  }

  .message-text {
    font-size: 16px !important;
  }

  /* Larger feed posts */
  .feed-post {
    padding: 18px !important;
  }

  .feed-post-avatar {
    width: 48px !important;
    height: 48px !important;
  }

  .feed-post-content {
    font-size: 16px !important;
    line-height: 1.6 !important;
  }

  /* Bigger modal paddings */
  .modal-body {
    padding: 24px !important;
  }

  /* Larger profile elements */
  .profile-avatar-large {
    width: 130px !important;
    height: 130px !important;
  }

  .profile-name-large {
    font-size: 26px !important;
  }

}


/* =========================================================
   PRINT STYLES (Optional)
   =========================================================
   Basic print optimization for chat/messages
   ========================================================= */

@media print {
  
  .chat-interface-wrapper {
    position: static !important;
    height: auto !important;
  }

  .chat-sidebar,
  .sidebar-backdrop,
  .message-input-container,
  .chat-tabs,
  .chat-mobile-header,
  .modal,
  .toast-container,
  .snackbar {
    display: none !important;
  }

  .chat-area {
    position: static !important;
    height: auto !important;
    overflow: visible !important;
  }

  .messages-container {
    position: static !important;
    height: auto !important;
    overflow: visible !important;
  }

  .message-bubble {
    break-inside: avoid !important;
    page-break-inside: avoid !important;
    
    box-shadow: none !important;
    border: 1px solid #ddd !important;
  }

  .message-bubble.own {
    background: #f0f0f0 !important;
  }

  .feed-post {
    break-inside: avoid !important;
    page-break-inside: avoid !important;
    
    box-shadow: none !important;
    border: 1px solid #ddd !important;
  }

}
